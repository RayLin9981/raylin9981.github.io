{"pages":[{"title":"page test","text":"","link":"/page-test/index-1.html"},{"title":"page test","text":"é€™æ˜¯ H1 çš„1ç›¸é—œæŒ‡ä»¤ï¼šchmod chown umask","link":"/page-test/index.html"}],"posts":[{"title":"2022 CKA + CKAD è€ƒè©¦åˆ†äº«","text":"å‰è¨€å¤§ç´„èŠ±äº†ä¸€å€‹æœˆå·¦å³çš„æ™‚é–“æº–å‚™ï¼Œåœ¨ä¸Šç¦®æ‹œæ‹¿åˆ°äº† CKA (Certified Kubernetes Administrator)ï¼ŒCKAD (Kubernetes Certified Application Developer) å…©å¼µè­‰ç…§ï¼Œåˆ†äº«ä¸€ä¸‹æˆ‘çš„æº–å‚™æ–¹å¼èˆ‡è€ƒè©¦æµç¨‹ï¼Œå¸Œæœ›å¯ä»¥å¹«åŠ©åˆ°éœ€è¦çš„äºº ^^ CKA + CKAD ç°¡ä»‹é€™å…©å¼µè­‰ç…§æ˜¯ Linux Foundation æ¨å‡ºé‡å° Kubernetes (ä¸‹ç¨± K8s) ç®¡ç†æŠ€èƒ½çš„è­‰ç…§ï¼Œé—œæ–¼ K8s çš„ç³»åˆ—è­‰ç…§é‚„æœ‰å¦ä¸€å¼µ CKSï¼Œä¸‰å¼µé›£åº¦ç²—ç•¥æ’åºå¦‚ä¸‹ï¼šCKS &gt; CKA &gt; CKADï¼Œå…¶ä¸­ CKS å¿…é ˆè¦æœ‰ CKA çš„èªè­‰æ‰èƒ½è€ƒã€‚ä»¥ä¸‹ç”¨ä¸€å¥è©±ç°¡è¿°é€™ä¸‰å¼µè­‰ç…§çš„ç¯„åœï¼š CKAï¼šç®¡ç†æ•´å€‹ K8s å¢é›†ï¼ŒåŒ…å«å®‰è£ï¼Œæ’éŒ¯ï¼Œè¨­å®šï¼Œç®¡ç†è³‡æºç­‰ç­‰ã€‚é©ç”¨æ–¼ K8s ç®¡ç†è€… CKADï¼šé€é K8s ä¾†éƒ¨ç½²æ‡‰ç”¨ç¨‹å¼ã€‚é©ç”¨æ–¼è»Ÿé«”é–‹ç™¼è€…ä¸¦ä¸”è¦ä½¿ç”¨ K8s å¹³å°çš„ CKSï¼šå¼·èª¿ K8s å®‰å…¨ä¸Šçš„è¨­å®šï¼Œä»¥åŠæ€§èƒ½ä¸Šçš„æœ€ä½³åŒ– ç›®å‰èªè­‰è€ƒè©¦åƒ¹æ ¼ç‚º 395 USDï¼Œæœ‰æä¾›ä¸€æ¬¡å…è²»é‡è€ƒçš„æ©Ÿæœƒã€‚ç¶²è·¯ä¸Šå¯ä»¥æ‰¾åˆ°ä¸€äº›æŠ˜æ‰£ç¢¼è¼¸å…¥ï¼Œæˆ‘æ˜¯ä½¿ç”¨ 35% off çš„ï¼Œåˆ·å¡è²»å°±å¤§ç´„ 8000 NTD å·¦å³ã€‚è€ƒè©¦çš„æ–¹å¼éƒ½æ˜¯å¯¦ä½œé¡Œï¼Œä½¿ç”¨æä¾›çš„ç’°å¢ƒåšåˆ°é¡Œç›®éœ€æ±‚çš„å…§å®¹ã€‚å› ç‚ºè€ƒè©¦æœ‰ç¶“éå¹¾æ¬¡æ›´æ–°ï¼Œæœ‰äº›æƒ…æ³è·Ÿä¸€äº›éƒ¨è½æ ¼çš„æœ‰é»ä¸å¤ªä¸€æ¨£äº†ï¼Œä¸‹é¢æœƒå†åˆ†äº«æˆ‘é€™æ¬¡è€ƒè©¦çš„æƒ…æ³ã€‚ æº–å‚™æ–¹å¼æˆ‘æ˜¯ç›´æ¥ç„¡è…¦çš„åœ¨ udemy ä¸Šé¢è²·èª²ç¨‹ï¼Œudemy è »å¸¸ç‰¹åƒ¹çš„ï¼Œå¯ä»¥ç­‰ç‰¹åƒ¹æ™‚å…¥æ‰‹ (æˆ‘çœ‹éæœ€ä½æŠ˜åˆ° NT 330 çš„)é¸æ“‡çš„èª²æ˜¯è©•åƒ¹æœ€é«˜çš„å…©å ‚ï¼Œæ‡‰è©²æ˜¯ 2019~2020 å¹´å·¦å³æ¨å‡ºçš„ï¼Œä¸éè‹¥è€ƒè©¦ç¯„åœæœ‰æ›´æ–°ä»–ä¹Ÿæœ‰æ›´æ–°è³‡è¨Šï¼Œå°±ä»¥æˆ‘é€™æ¬¡å­¸ç¿’èˆ‡è€ƒè©¦ä¸Šæˆ‘èªç‚ºå…§å®¹æ˜¯å¾ˆè¶³ä»¥æ‡‰ä»˜è€ƒè©¦çš„ã€‚udemy èª²ç¨‹é€£çµé€™ä¸Šé¢æ˜¯ CKA çš„ï¼Œå¯ä»¥æ ¹æ“šåŒä½œè€…å»æœå°‹åˆ° CKAD çš„ï¼Œèª²ç¨‹é•·åº¦æ¯å ‚ç´„ 20 hrï¼Œæ˜¯è‹±æ–‡æˆèª²ä¸éå¯ä»¥ä½¿ç”¨ç°¡é«”ä¸­æ–‡å­—å¹•ã€‚é‡å°å®Œå…¨æ²’æ¥è§¸é K8s çš„å­¸ç”Ÿï¼Œä»–æœ‰å¦ä¸€å ‚èª²æ˜¯ä»‹ç´¹ä¸€äº›æœ€åŸºæœ¬ K8s çš„æ¦‚å¿µï¼Œä½†æˆ‘è‡ªå·±æ˜¯å·²ç¶“æœ‰ä½¿ç”¨ç¶“é©—äº†æ‰€ä»¥å°±æ²’æœ‰å†å»å­¸é‚£å ‚èª²ã€‚å¦å¤–å¾ˆæ¨è–¦é€™å ‚èª²æœ‰æä¾› Lab ç’°å¢ƒå¯ä»¥æ“ä½œï¼Œå¹¾ä¹æ¯ä¸€å€‹è§€å¿µè¬›å®Œå¾Œéƒ½å¯ä»¥å¯¦éš›ç·´ç¿’ï¼Œæˆ‘èªç‚ºå°æ–¼è­‰ç…§çš„æº–å‚™æ˜¯æœ‰å¾ˆå¤§çš„å¹«åŠ©ã€‚ æˆ‘çš„æº–å‚™æµç¨‹è²·äº†ä»¥ä¸Šå…©å ‚èª²å¾Œï¼Œæˆ‘æ˜¯å…ˆæŠŠ CKA çš„å…§å®¹çœ‹å®Œï¼Œä¹Ÿç·´å®Œ killer.sh æä¾›çš„æ¨¡æ“¬è€ƒä¹‹å¾Œï¼Œæ‰é–‹å§‹çœ‹ CKADï¼Œä½†éç¨‹ä¸­ç™¼ç¾ CKAD çš„å…§å®¹å¹¾ä¹ CKA éƒ½æœ‰æ¶µè“‹åˆ°ï¼Œåªæ˜¯é‡å° Pod ç›¸é—œå¤šå»¶ä¼¸äº†ä¸€é»é»ï¼Œå°±æ²’æœ‰å†å›é ­æŠŠ CKAD æ•´å€‹èª²ç¨‹è·‘éï¼Œè€Œæ˜¯ç›´æ¥å»è€ƒ CKAD killer.sh çš„æ¨¡æ“¬è€ƒé¡Œï¼Œç™¼ç¾å¯ä»¥å¤§ç´„å®Œæˆ 7 æˆå·¦å³çš„é¡Œç›®å¾Œï¼Œå°±åªé‡å°é€™å€‹æ¨¡æ“¬è€ƒå»æº–å‚™äº†ã€‚ 2022 è€ƒè©¦æµç¨‹åƒè€ƒæˆ‘æ˜¯ä½¿ç”¨ macbook pro 13 å‹ 2022 è€ƒçš„ï¼Œä¸¦ä¸”æœ‰å¤–æ¥æ»‘é¼  (åŸæœ¬é‚„æ‰“ç®—æ¥ä¸€å€‹ 27 å‹çš„è¢å¹•)ï¼Œè€ƒè©¦æµç¨‹æœ‰é»æ²’æœ‰å¾ˆé †åˆ©ï¼Œè¨˜éŒ„ä¸€ä¸‹æˆ‘é‡åˆ°çš„å•é¡Œï¼š ç›®å‰ 2022 çš„ç‰ˆæœ¬å·²ç¶“ä¸æ˜¯ä½¿ç”¨ chrome è€ƒäº†ï¼Œè€Œæ˜¯ä½¿ç”¨ PSI Bridge Secure Browser æœ‰è¨±å¤š blog æœƒå»ºè­°å¯ä»¥è¨­æ›¸ç±¤å¿«é€ŸæŸ¥æ‰¾æ–‡ä»¶ï¼Œä¸éç¾åœ¨è¦å®šè¦ä½¿ç”¨å®ƒçš„ web browser ä¾†è€ƒè©¦ï¼Œç’°å¢ƒæœƒåˆ©ç”¨é€™å€‹ APP çš„ä»‹é¢æ“ä½œé ç«¯æ¡Œé¢ï¼ŒæŸ¥æ‰¾æ–‡ä»¶å°±ä½¿ç”¨è£¡é¢çš„ firefox ç€è¦½å™¨ã€‚ ä»‹é¢çš„ä½¿ç”¨æ„Ÿè¦ºå°±èˆ‡ killer.sh æä¾›çš„æ¨¡æ“¬ä»‹é¢å¾ˆç›¸ä¼¼ï¼Œæ‰€ä»¥åªè¦æ¨¡æ“¬é¡Œåšç†Ÿå°±æ²’ä»€éº¼å•é¡Œ PSI Bridge Secure Browser èˆ‡ PSI Secure Browser é€™å€‹ PSI Bridge Secure Browser æ˜¯æˆ‘åœ¨è€ƒè©¦å‰ 30 åˆ†é˜ç­‰åˆ° take exam ä¹‹å¾Œæ‰ç™¼ç¾éœ€è¦å®‰è£ï¼Œå¤§ç´„ 600 MB å·¦å³ï¼Œå®‰è£å®Œä¹‹å¾Œå°±æœƒé€²å…¥æª¢æŸ¥è¨­å®šçš„éƒ¨åˆ† ä¸€é–‹å§‹ launch exam çš„æ™‚å€™é‚£å€‹ Download ä¸èƒ½æŒ‰ï¼Œæ‰€ä»¥æˆ‘å°±è‡ªå·±åˆ°ç¶²è·¯ä¸Šå®‰è£éŒ¯çš„ PSI Secure Browser ï¼Œæå¾—æˆ‘å¾ˆç·Šå¼µ (é‚£å€‹é é¢æœƒè¦è¼¸å…¥ exam codeï¼Œæˆ‘æ‰¾åŠå¤©æ‰¾ä¸åˆ°) macbook å¤–æ¥è¢å¹• ä¸€é–‹å§‹æˆ‘æ‰“ç®—ç”¨é¡åƒè¼¸å‡ºçš„æ–¹å¼æ¥è¢å¹•ï¼Œçµæœæœƒåµæ¸¬åˆ°æœ‰ 2 å€‹è¢å¹•å°è‡´ç„¡æ³•é€šé APP æœ¬èº«çš„å®‰å…¨æ¸¬è©¦ï¼Œå¾Œä¾†å°±å…ˆæŠŠè¢å¹•æ‹”æ‰ã€‚ ç­‰åˆ°è­·ç…§ï¼Œç’°å¢ƒç­‰ç­‰éƒ½é©—è­‰å®Œä¹‹å¾Œï¼Œæˆ‘ç”¨ Live chat è©¢å•èƒ½ä¸èƒ½ä½¿ç”¨å¤–æ¥è¢å¹•ï¼Œä»–å›ç­”æˆ‘ Yesï¼Œçµæœæˆ‘ä¸€æ’ä¸Šå» APP å°±é¡¯ç¤ºæˆ‘æœ‰é¡å¤–æ¥å…¥ deviceï¼Œå¼·åˆ¶é—œæ‰æˆ‘çš„è€ƒè©¦ç’°å¢ƒ æœ€å¾Œé‡æ–°é€²å…¥ï¼Œåˆè¦å†æª¢æŸ¥ä¸€æ¬¡è­·ç…§èˆ‡ç’°å¢ƒï¼Œç­‰åˆ°éƒ½ ok ä¹‹å¾Œé€²å»ï¼Œç™¼ç¾æˆ‘ CKA çš„æ™‚é–“å·²ç¶“éäº† 20 åˆ†é˜ï¼Œå¾Œä¾†ä¹Ÿæ²’æœ‰ä½¿ç”¨å¤–æ¥è¢å¹•è€ƒè©¦äº†ã€‚ å¾Œä¾† CKAD çš„æ™‚å€™æˆ‘å°±æ²’æœ‰æ‰“ç®—å¤–æ¥è¢å¹•ï¼Œä¹Ÿç™¼ç¾é‚£å€‹ PSI Bridge Secure Browser æœ‰å¯ä»¥èª¿æ•´ view çš„é¸é …ï¼Œåœ¨ä¸Šé¢çš„åœ°æ–¹å¯ä»¥é¸æ“‡ zoom in/outï¼ŒæŠŠæ•´å€‹ç•«é¢èª¿å¤§ä¸€é»æ“ä½œèµ·ä¾†æ‰æ¯”è¼ƒé † (ç›¸ä¿¡æˆ‘ï¼Œä¸èª¿çš„è©±é‚£å€‹å¤§å°æ ¹æœ¬æ²’è¾¦æ³•çœ‹æ–‡ä»¶) è€ƒè©¦çµæœé€šçŸ¥å®˜æ–¹æ˜¯èªªæœƒåœ¨ 24 å°æ™‚å…§é€šçŸ¥ï¼Œæˆ‘å…©å€‹è€ƒè©¦çš„çµæœéƒ½æ˜¯åœ¨ â€˜å®‰æ’è€ƒè©¦çš„æ™‚é–“é»çš„ 24 hr å¾Œâ€™ æ”¶åˆ°ï¼Œä¹Ÿå°±æ˜¯æˆ‘å®‰æ’æ—©ä¸Š 9 é»è€ƒè©¦ï¼Œé‚£å°±æ˜¯åœ¨éš”å¤©çš„æ—©ä¸Š 9 é»æ”¶åˆ°çµæœï¼Œåœ¨ä¸‹åˆ 4 é»å°±æ˜¯éš”å¤©çš„ä¸‹åˆ 4 é»é€™æ¨£ å¾Œè¨˜ä»¥ä¸Šå°±æ˜¯æˆ‘è€ƒåˆ°é€™å…©å¼µè­‰ç…§çš„å¿ƒå¾—åˆ†äº«ï¼Œå¸Œæœ›èƒ½å¹«åˆ°çœ‹å®Œçš„ä½ ~~","link":"/2022/09/25/2022-CKA-CKAD-%E8%80%83%E8%A9%A6%E5%88%86%E4%BA%AB/"},{"title":"Prometheus-operator (prometheus-stack) ç°¡ä»‹","text":"å‰è¨€ç›®å‰ä½¿ç”¨ Helm ä¾†å®‰è£æ™‚æ¡ç”¨çš„æ–¹æ³•ï¼Œé€éè‡ªå®šç¾© CRD (Kubernetes Custom Resource) ä¾†ç”Ÿæˆ prometheus çš„å„ç¨®å…ƒä»¶ ä¹Ÿå› ç‚ºä½¿ç”¨ CRD çš„é—œä¿‚ï¼Œå­¸ç¿’ä¸Šæœƒæ¯”è¼ƒä¸ç›´è§€ï¼Œé€™éƒ¨åˆ†é‚„æ˜¯éœ€è¦å° prometheus å®˜æ–¹æ–‡ä»¶ç†Ÿæ‚‰ä¸€é»é è¨ˆä¹‹å¾Œæœƒå†é‡å°åŸºæœ¬çš„ prometheus, alertmanager è¨­å®šå†æ•´ç†ä¸€ä¸‹ æœƒæŠŠ API å­˜åœ¨ monitoring.coreos.com/v1 helm chart é€£çµ 123456helm repo add prometheus-community https://prometheus-community.github.io/helm-chartshelm repo updatehelm install kube-prometheus-stack prometheus-community/kube-prometheus-stack --namespace monitoring --create-namespace# å®‰è£å®Œä¹‹å¾Œé€²å…¥ä»‹é¢ è¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤ä¹‹å¾Œé€é http://localhost:8080 é€²å…¥kubectl port-forward -n=monitoring svc/kube-prometheus-stack-grafana 8080:80# éœ€è¦å¸³è™Ÿå¯†ç¢¼ï¼Œé€é secret kube-prometheus-stack-grafana å–å¾— é€™å€‹ stack åŒ…å«äº†å¾ˆå¤šæ±è¥¿ï¼šPrometheus, Prometheus Operator, Alertmanager, Grafana, kube-state-metrics, prometheus-node-exporter â€¦ç­‰å…ƒä»¶ ä»¥ä¸‹æ˜¯ä¸»è¦é¡å¤–å®šç¾©çš„ CRDï¼š Prometheusï¼šè²æ˜å¼å’Œç®¡ç† Prometheus Server å¯¦ä¾‹ï¼› config ä½¿ç”¨ secret å­˜æ”¾ï¼Œç‚º .yaml.gz æ ¼å¼ (å¯ç”¨ gzip -d è§£å£“) ServiceMonitorï¼šè² è²¬è²æ˜å¼çš„ç®¡ç†ç›£æ§é…ç½®ï¼› ä¾ç…§è¨­å®šçš„å…§å®¹ç”¢ç”Ÿ jobs config å…§å®¹ï¼Œä¸¦ä¸”æ›´æ–°åˆ° Prometheus PrometheusRuleï¼šè² è²¬è²æ˜å¼çš„ç®¡ç†å‘Šè­¦é…ç½®ï¼› å®šç¾© prometheus rules ä½¿ç”¨ (æ–°å¢æ–¼ configmap) Rule çš„è¨­å®šæ˜¯é€é configmap æ›çµ¦ Prometheus çš„ï¼Œåç¨±ç‚º prometheus-prometheus-operator-kube-p-prometheus-rulefiles-0 Alertmanagerï¼šè²æ˜å¼çš„å»ºç«‹å’Œç®¡ç† Alertmanager å¯¦ä¾‹ã€‚ ä½¿ç”¨ alertmanagerconfigs ä¸Ÿå…¥è¨­å®šæª”å‹•æ…‹è¼‰å…¥ Prometheus é€™å€‹ Pod æœƒè·‘ 2 å€‹ containerï¼Œimage åˆ†åˆ¥ç‚ºï¼š prometheus-config-reloader è² è²¬ç›£æ§ secret ç‰©ä»¶ï¼Œä¸€æœ‰è®Šå‹•å°±ç”¢ç”Ÿæ–°çš„ config å¯çœ‹åˆ° prometheus-config-reloader çš„åŸ·è¡ŒæŒ‡ä»¤åƒæ•¸ --watch-dir å°±æ˜¯æŒ‡å®šé€™å€‹ configmap æ›è¼‰çš„é»ï¼Œå› æ­¤åªè¦æ–°å¢ configmap å°±å¯ä»¥æ–°å¢ rule prometheus å¯¦éš›è·‘ server çš„ containerï¼Œæ˜¯è®€å– config_out ç›®éŒ„ä¸Šçš„è¨­å®šæª” prometheus çš„è¨­å®šæ˜¯ä½¿ç”¨ secret çš„æ–¹å¼ä¾†æ›è¼‰ï¼Œç¶“é initcontainer è™•ç†å¾Œè½‰æˆå¯ä½¿ç”¨çš„ configï¼Œç›®éŒ„åœ¨ /etc/prometheus/config_out/prometheus.env.yaml configï¼šç”± secret æ›è¼‰ config_out (å¯¦éš›è¼‰å…¥çš„)ï¼šemptyDir å…±ç”¨ (ç”± reloader ç”¢ç”Ÿ) rule_filesï¼šç”± configMap æ›è¼‰ ä½¿ç”¨ PrometheusRule ä¾†æ–°å¢ï¼Œä»–æœƒå»æ›´æ–° configMap åœ¨ Prometheus stack çš„ç³»çµ±ä¸­ï¼Œéƒ½æ˜¯é€é labels ä¾†é€£æ¥çš„ï¼Œä»¥ä¸‹å¹¾å€‹ä¾‹å­ï¼š Prometheus instance â†” ServiceMonitors (ç”¢ç”Ÿå°æ‡‰ jobs) ServiceMonitors â†” Service (è¨­å®š metrices ä½ç½®) PrometheusRule â†” Prometheus instance (ruleSelector) ServiceMonitoré€éç¶å®š Service ä¾†ç›£æ§ APPï¼Œç¶å®šçš„æ–¹å¼æ˜¯ä½¿ç”¨ label åŠ ä¸Šå°æ‡‰çš„ port Name ä»¥ä¸‹ç¯„ä¾‹æ˜¯å·²ç¶“æœ‰å»ºç«‹äº†ä¸€å€‹ deployment èˆ‡ svc è©² deployment çš„ image è¨­è¨ˆå·²ç¶“å° /metrics ä¸Ÿäº†ä¸€äº›è³‡æ–™ï¼Œå› æ­¤æ²’æœ‰åˆ©ç”¨åˆ°é¡å¤–çš„ exporter 123456789101112131415161718192021apiVersion: monitoring.coreos.com/v1kind: ServiceMonitormetadata: name: example-app namespace: monitoring labels: team: frontendspec: # è¨­å®šæœå°‹çš„ namespace, å¯é€é any ä»£è¡¨æ‰€æœ‰ namespace namespaceSelector: matchNames: - default # å°æ‡‰åˆ° service çš„ label selector: matchLabels: app: example-app # endpoints: å°æ‡‰åˆ° service çš„ port åç¨± endpoints: - port: web path: /metrics # ç‚ºé è¨­å€¼ interval: 15s è¨­å®šå®Œå¾Œï¼Œå°±å¯ä»¥åœ¨ prometheus ä¸Šçœ‹åˆ°æ–°çš„ target æŠ“å–è©² APP çš„ metrics Prometheus instanceé€™éƒ¨åˆ†æ¯”è¼ƒä¸æœƒèª¿æ•´åˆ°ï¼Œå¯èšç„¦åœ¨ label selector çš„éƒ¨åˆ† æœ‰ serviceMonitorNamespaceSelector, podMonitorSelector ruleSelector åˆå§‹åŒ–å¯ä»¥ä½¿ç”¨ values.yaml èª¿æ•´ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ kubectl edit 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051apiVersion: monitoring.coreos.com/v1kind: Prometheusmetadata: annotations: meta.helm.sh/release-name: prometheus-operator meta.helm.sh/release-namespace: monitoring generation: 1 labels: app: kube-prometheus-stack-prometheus app.kubernetes.io/instance: prometheus-operator app.kubernetes.io/managed-by: Helm app.kubernetes.io/part-of: kube-prometheus-stack app.kubernetes.io/version: 28.0.1 chart: kube-prometheus-stack-28.0.1 heritage: Helm release: prometheus-operator name: prometheus-operator-kube-p-prometheus namespace: monitoringspec: additionalScrapeConfigs: key: additional-scrape-configs.yaml name: prometheus-operator-kube-p-prometheus-scrape-confg alerting: alertmanagers: - apiVersion: v2 name: prometheus-operator-kube-p-alertmanager namespace: monitoring pathPrefix: / port: http-web externalUrl: http://prometheus-sit.k8sbridge.com/ image: quay.io/prometheus/prometheus:v2.32.1 podMonitorNamespaceSelector: {} podMonitorSelector: {} portName: http-web probeNamespaceSelector: {} probeSelector: matchLabels: release: prometheus-operator replicas: 1 retention: 10d routePrefix: / ruleNamespaceSelector: {} ruleSelector: matchLabels: release: prometheus-operator secrets: - etcd-certs serviceAccountName: prometheus-operator-kube-p-prometheus serviceMonitorNamespaceSelector: {} serviceMonitorSelector: {} version: v2.32.1 PrometheusRuleç”¢ç”Ÿ jobsï¼Œå…§å®¹èˆ‡åŸæœ¬çš„ prometheus rule å¾ˆæ¥è¿‘ 123456789101112131415161718apiVersion: monitoring.coreos.com/v1kind: PrometheusRulemetadata: labels: release: prometheus-operator name: kube-prometheus-stack-ray.rulesspec: groups: - name: ray.rules rules: - alert: masterNodeDiskChecking annotations: message: | haha! I am Ray and I learning prometheus~~ expr: node_filesystem_avail_bytes{device=&quot;/dev/mapper/ubuntu--vg-ubuntu--lv&quot;,fstype=&quot;xfs&quot;,mountpoint=&quot;/&quot;,instance=&quot;192.168.1.81:9100&quot;} &gt; 0 for: 15m labels: severity: warning AlertmanagerConfigé€™éƒ¨åˆ†æœƒèˆ‡åŸæœ¬çš„ secret alertmanager-prometheus-operator-kube-p-alertmanager ä¸€èµ·ä½¿ç”¨ï¼Œå®šç¾©çš„å…§å®¹éƒ½æœƒæ˜¯åœ¨ secret å…§éƒ¨çš„ (æ‰€ä»¥è¦æ”¹ global çš„è¨­å®šéœ€è¦å»èª¿æ•´ secret)è¦æ³¨æ„çš„æ˜¯åœ¨ route çš„éƒ¨åˆ†ï¼Œæ¡ç”¨é€™å€‹æ–¹å¼å»ºç«‹çš„éƒ½æœƒè‡ªå‹•ç”¢ç”Ÿä¸€å€‹ matcher: namespace ä¾†è®“æ¯ä¸€æ¢ config éƒ½åªè² è²¬è‡ªå·±çš„ namespaceä»¥ä¸‹æ˜¯ç°¡æ˜“è¨­å®š slack é€šçŸ¥çš„ 12345678910111213141516171819202122232425262728293031apiVersion: monitoring.coreos.com/v1alpha1kind: AlertmanagerConfigmetadata: name: config-example labels: alertmanagerConfig: examplespec: route: groupBy: ['alertname', 'job'] # å ±è­¦åˆ†çµ„ä¾æ“š groupWait: 10s # æœ€åˆå³ç¬¬ä¸€æ¬¡ç­‰å¾…å¤šä¹…æ™‚é–“å‚³é€ä¸€çµ„è­¦å ±çš„é€šçŸ¥ groupInterval: 10s # åœ¨å‚³é€æ–°è­¦å ±å‰çš„ç­‰å¾…æ™‚é–“ repeatInterval: 12h # å‚³é€é‡è¤‡è­¦å ±çš„é€±æœŸ receiver: 'slack-example' # å‚³é€è­¦å ±çš„æ¥æ”¶è€…çš„åç¨±ï¼Œä»¥ä¸‹receivers nameçš„åç¨± receivers: - name: 'slack-example' slackConfigs: - sendResolved: false apiURL: name: 'slack-config' key: 'urlSecret' channel: '#alertmanager'---# é€™è£¡çš„ urlSecret è¦åˆ° slack å»è¨­å®šå–å¾—apiVersion: v1kind: Secrettype: Opaquemetadata: name: slack-configdata: urlSecret: ********************** å°çµé€™é‚Šç®—æ˜¯åšä¸€å€‹ç°¡æ˜“çš„ç´€éŒ„ï¼ŒæŠŠå„å…ƒä»¶åŸºæœ¬çš„è¨­å®šå¯«ä¸‹ä¾†ï¼Œä½†å¯¦éš›ä¸Šè¦å…ˆç†è§£åŸæœ¬ prometheus/alertmanager å¾Œæ‰æœ‰è¾¦æ³•è¨­å®šé€™äº›ï¼Œé€™é‚Šç¶²è·¯ä¸Šçš„è³‡æºè »å¤šçš„ï¼Œä¹‹å¾Œå†ä¾†æ•´ç†æ•´ç† åƒè€ƒè³‡æ–™Prometheus Operator â€” ç‚º Kubernetes è¨­å®šåŠç®¡ç† Prometheus | by smalltown | getamisä½¿ç”¨Operatorç®¡ç†Prometheus - prometheus-book (gitbook.io)é€šè¿‡ServiceMonitoråˆ›å»ºæœåŠ¡å‘ç° (aliyun.com)","link":"/2022/09/14/Prometheus-operator-prometheus-stack-%E7%B0%A1%E4%BB%8B/"},{"title":"Linux Cgroup v2 ç°¡æ˜“å¯¦ä½œ CPU ç®¡ç†","text":"å‰è¨€åœ¨ç›®å‰ç’°å¢ƒä¸­å¾ˆå¸¸ä½¿ç”¨åˆ°çš„ å®¹å™¨åŒ– ä¸»è¦å°±æ˜¯é€é Linux kernel çš„è³‡æºéš”é›¢ä¾†åšåˆ°çš„å› æ­¤è¦å¼„æ‡‚å®¹å™¨æ€éº¼åšåˆ°è³‡æºç®¡ç†ï¼Œå°±å¿…é ˆè¦ç†è§£ Cgroup (control group) Linux namespace, overlay2 ç­‰ç­‰çš„é‚£é€™ä¸€ç¯‡æœƒèšç„¦åœ¨é‹ç®—è³‡æº (CPU) ä¸Šé¢åšä¸€å€‹å¾ˆç°¡å–®çš„å¯¦ä½œ Cgroup v2 (control group)CGroup æ‰€ç®¡ç†çš„å°è±¡æ˜¯ process (PID) ã€‚ç”¨ä¾†é™åˆ¶ã€éš”é›¢è³‡æºä½¿ç”¨ï¼Œåˆ†é…è³‡æºå…¶ä¸­å¯åˆ†é…çš„è³‡æºåŒ…å«ï¼šCPU çš„æ™‚é–“ï¼Œè¨˜æ†¶é«”ï¼Œç¶²è·¯è£ç½®ç­‰ç­‰ï¼Œå¯ä»¥åœ¨ç³»çµ±ä¸Šè¼¸å…¥æŒ‡ä»¤cat /sys/fs/cgroup/cgroup.controllersæœƒå‡ºç¾ cpuset cpu io memory hugetlb pids rdma misc ç­‰ç­‰çš„æœ¬ç¯‡æœƒèšç„¦æ–¼ cpuset cpu é€™å…©é … ä¹‹å‰ç¬¬ä¸€æ¬¡ç”¨çš„æ™‚å€™ä½¿ç”¨ ubuntu 20.04ï¼Œé è¨­é‚„æ˜¯ä½¿ç”¨ Cgroup v1ï¼Œä¸éåœ¨ ubuntu 22.04 (kernel 5.15) ä¸‹å·²ç¶“æ”¹æˆé è¨­ä½¿ç”¨ v2 äº† ç’°å¢ƒæè¿° åœ¨ Win10 ä½¿ç”¨ VMware Workstation 16 Player é–‹å•Ÿè™›æ“¬æ©Ÿ è™›æ“¬æ©Ÿè¦æ ¼ä¸æ‹˜ï¼Œä½†æˆ‘çš„ç’°å¢ƒæ˜¯ä½¿ç”¨ 2 CPU ä¾†æ¸¬è©¦ è™›æ“¬æ©Ÿ OS: ubuntu 22.04 kernel ç‰ˆæœ¬: 5.15.0-39-generic æ¸¬è©¦æª”æ¡ˆæ¸¬è©¦çš„æ–¹å¼æ˜¯é€é yes é€™éš»ç¨‹å¼æœƒä¸æ–·ç”¢ç”Ÿè³‡æ–™çš„ç‰¹æ€§ï¼Œå†ä½¿ç”¨ timeout ä¾†æ§åˆ¶æ™‚é–“ï¼Œé€éæ¯”å°ç”¢ç”Ÿçš„è³‡æ–™é‡ä¾†æ¯”è¼ƒèªªæ˜¯å¦æœ‰é™åˆ¶æˆåŠŸ process å­˜å– CPU çš„æ™‚é–“æ¸¬è©¦ä¸€å…±æœƒé€²è¡Œå…©æ¬¡ï¼Œç¬¬ä¸€æ¬¡æ˜¯ç„¡é™åˆ¶çš„æƒ…æ³ï¼Œç¬¬äºŒæ¬¡å‰‡æ˜¯åŠ ä¸Š Cgroup ä¾†æ§åˆ¶é€™é‚Šå…ˆé™„ä¸Šç¨‹å¼ï¼Œèªªæ˜å®Œä¹‹å¾Œå†ä¾†çœ‹åŸ·è¡Œçµæœ 12345678910111213141516171819202122232425262728293031323334353637383940414243#!/bin/bash# cpuset.sh function initabc(){ LOW_DIR_PATH=&quot;/sys/fs/cgroup/low&quot; [ -d &quot;$LOW_DIR_PATH&quot; ] &amp;&amp; sudo rmdir &quot;$LOW_DIR_PATH&quot; sudo mkdir &quot;$LOW_DIR_PATH&quot; CGROUPOPTION=$(cat /sys/fs/cgroup/low/cgroup.controllers) echo &quot;$LOW_DIR_PATH control: $CGROUPOPTION&quot; echo &quot;every test will use 3 sec for 'yes' command, and record result to result.txt&quot; cat /dev/null &gt; result.txt}function testabc(){ for i in $(seq 1 3) do timeout 1 yes &gt; test.txt du -h test.txt | cut -d $'\\t' -f1 &gt;&gt; result.txt done}function clearabc(){ rm test.txt echo 'test.txt removed!'}echo $1if [ &quot;$1&quot; = &quot;clear&quot; ] ;then clearabc exit 0fiinitabcecho '---origin size result---' &gt;&gt; result.txtecho 'test1...'testabcecho $$ | sudo tee &quot;$LOW_DIR_PATH/cgroup.procs&quot; &gt; /dev/nullecho 0 | sudo tee &quot;$LOW_DIR_PATH/cpuset.cpus&quot; &gt; /dev/nullecho 20000 100000 | sudo tee /sys/fs/cgroup/low/cpu.max &gt; /dev/nullecho '---after cgroup control---' &gt;&gt; result.txtecho 'test2...'testabcecho 'test finish, can check result.txt, here is result:'cat result.txt èªªæ˜ä¸€é–‹å§‹å¯ä»¥å…ˆä½¿ç”¨ mount | grep cgroup ä¾†æª¢æŸ¥ Cgroup åœ¨ç³»çµ±ä¸Šçš„æ›è¼‰é»ï¼Œä»¥åŠæ˜¯å¦ä½¿ç”¨ v2 ç‰ˆæœ¬ åœ¨ /sys/fs/cgroup é€™å€‹ç›®éŒ„ä¸‹æœ‰å¾ˆå¤šæª”æ¡ˆï¼Œè€Œå¦‚æœåœ¨è©²ç›®éŒ„æ–°å¢æ–°çš„ç›®éŒ„çš„è©±ï¼Œæœƒç™¼ç¾è£¡é¢è‡ªå‹•å¤šäº†å¾ˆå¤šæª”æ¡ˆï¼Œæˆ‘å€‘å°±æ˜¯é€éé€™äº›æª”æ¡ˆä¾†ä½¿ç”¨ Cgroupè¦æ³¨æ„é€™å€‹ç›®éŒ„é è¨­æ˜¯ç”± root æ‰€æ“æœ‰ï¼Œå› æ­¤è¦ä¿®æ”¹çš„è©±å°±ä¸€èˆ¬ä½¿ç”¨è€…å¿…é ˆä½¿ç”¨ sudo é€™è£¡é¢çš„æª”æ¡ˆæœƒæ ¹æ“š cgroup.controllers, cgroup.subtree_control é€™å…©å€‹æª”æ¡ˆåšè®Šå‹•ï¼Œå…ˆå°é€™å…©å€‹æª”æ¡ˆåšä¸€å€‹ç°¡å–®çš„è§£é‡‹ï¼š cgroup.controllers è£¡é¢æœƒè¨˜éŒ„èªªç›®å‰è¨­å®šè¦ç®¡ç†çš„è³‡æº æœ‰ cpuset cpu io memory pids ç­‰ç­‰ï¼Œ cgroup.subtree_control è¨­å®šå­ç›®éŒ„å¯¦éš›ä¸Šç®¡ç†ä»€éº¼è³‡æº ç‚º cgroup.controllers çš„å­é›† echo '+pids -memory' &gt; x/y/cgroup.subtree_control é€™å€‹æ˜¯ man page è£¡é¢çš„ç¯„ä¾‹ï¼Œé€™å€‹æª”æ¡ˆæœƒå»æª¢æŸ¥å­—ä¸²ç„¶å¾Œèª¿æ•´è¦åŠ å…¥çš„å…§å®¹ (ä¹Ÿå°±æ˜¯åŠ å…¥ç”¨ + æ‰£é™¤ç”¨ -) æˆ‘å€‘å…ˆæŠŠæˆ‘å€‘éœ€è¦ç®¡ç†çš„ cpu cpuset åŠ é€²æ ¹ç›®éŒ„çš„æª”æ¡ˆ /sys/fs/cgroup/cgroup.subtree_control 12echo &quot;+cpu +cpuset&quot; | sudo tee /sys/fs/cgroup/cgroup.subtree_controlcat /sys/fs/cgroup/cgroup.subtree_control # çœ‹ä¸€ä¸‹æœ‰æ²’æœ‰åŠ æˆåŠŸ æ¥ä¸‹ä¾†éœ€è¦ä¸€å€‹å­ç›®éŒ„ç”¨ä¾†æ¸¬è©¦ç”¨ï¼Œåœ¨æˆ‘çš„ä¾‹å­è£¡æ˜¯å–åå«åš low ï¼Œä¸¦ä¸”å°å…¶ä¸­çš„ä¸‰å€‹æª”æ¡ˆå¢åŠ å…§å®¹ cpuset.cpus ï¼šæŒ‡å®šè¦ä½¿ç”¨å“ªä¸€é¡† CPU (å¾0é–‹å§‹ç®—) ä»¥æˆ‘çš„ç’°å¢ƒæœ‰é›™æ ¸ï¼Œè©²æª”æ¡ˆé è¨­ç‚º 0-1 ï¼Œè‹¥è¦æŒ‡å®šä½¿ç”¨ç¬¬ä¸€é¡†æ ¸å¿ƒå°±æ”¹æˆ 0 cpu.max ï¼šä½¿ç”¨å…©å€‹åƒæ•¸ä¾†æ§åˆ¶ CPU çš„å æ¯” é è¨­ç‚º max 100000 è€Œæˆ‘è¨­å®š 20000 100000 ä»£è¡¨æœ€å¤šåªèƒ½ä½¿ç”¨åˆ° 20% çš„æ™‚é–“ cgroup.procs ï¼š æ”¾å…¥è¦æ§åˆ¶çš„ PID, åœ¨ç¨‹å¼ç¢¼ä¸­ä½¿ç”¨ $$ ä¾†å¸¶å…¥ æœƒå°‡è©² PID åº•ä¸‹çš„æ‰€æœ‰ sub-process è‡ªå‹•åŠ å…¥ 1234567sudo mkdir /sys/fs/cgroup/low# å¸¶å…¥ PID, é€™é‚Šä½¿ç”¨ $$ æ˜¯ç¨‹å¼çš„å¯«æ³•echo $$ | sudo tee &quot;$LOW_DIR_PATH/cgroup.procs&quot; &gt; /dev/null# æŒ‡å®šç”¨ç¬¬ä¸€å€‹æ ¸å¿ƒecho 0 | sudo tee &quot;$LOW_DIR_PATH/cpuset.cpus&quot; &gt; /dev/null# å æ¯”ä½¿ç”¨ 20%echo 20000 100000 | sudo tee /sys/fs/cgroup/low/cpu.max &gt; /dev/null åŸ·è¡Œçµæœ1./cpuset.sh ç”¢ç”Ÿçš„è³‡æ–™é‡æ²’æœ‰é‚£éº¼ç²¾ç¢ºçš„æ˜¯ 1/5 (20%)ï¼Œä½†æ˜¯å¯ä»¥çœ‹å‡º CPU æœ‰å—åˆ°é™åˆ¶ï¼Œä¸¦ä¸”ä¹Ÿæœƒéš¨è‘—å æ¯”çš„å€¼æœ‰æ‰€å€éš”è€Œå¦‚æœæƒ³è¦ç¢ºå®šæ˜¯ä¸æ˜¯çœŸçš„ 20% ï¼Œå¯ä»¥æ‰‹å‹•çš„åŸ·è¡Œä¸€å€‹ yes æŒ‡ä»¤ï¼Œç„¶å¾ŒæŠŠä»–çš„ PID ä¸Ÿé€²å»å†ä½¿ç”¨ top è§€å¯Ÿï¼Œå°±å¯ä»¥çœ‹åˆ° 20% äº† 12345# åŸ·è¡Œå…©å€‹ï¼ŒæŠŠå…¶ä¸­ä¸€å€‹çš„ PID è¨˜ä¸‹ä¾†ä¸Ÿé€²å»yes &gt; /dev/null &amp;yes &gt; /dev/null &amp;echo &quot;8566&quot; | sudo tee /sys/fs/cgroup/low/cgroup.procstop # çœ‹çœ‹æ˜¯ä¸æ˜¯ä¸€å€‹å ç”¨ 100% ä¸€å€‹å ç”¨ 20% ä¸Šä¸‹ å¾Œè¨˜é€™ç¯‡çš„å…§å®¹ä¸»è¦ç®—æ˜¯è¤‡ç¿’ç”¨ï¼Œæ±è¥¿å¾ˆç°¡å–®å¾ˆå–®ç´”ï¼Œä¸éä¸å¸¸ä½¿ç”¨çš„è©±é‚„æ˜¯å¾ˆå®¹æ˜“å¿˜è¨˜åšä¸€é»ç°¡å–®çš„ä¾‹å­ä¾†è®“è‡ªå·±åŠ æ·±å°è±¡~ åƒè€ƒè³‡æ–™cgroups(7) - Linux manual page (man7.org)è¯¦è§£Cgroup V2 | Zorroâ€™s Linux Book (zorrozou.github.io)Redhat æ–‡ä»¶","link":"/2022/07/03/Linux-Cgroup-V2-%E7%B0%A1%E6%98%93%E5%AF%A6%E4%BD%9C/"},{"title":"SRE (DevOps) å¦‚ä½•å®šç¾©ï¼ŒSLIã€SLOã€SLA æ˜¯ä»€éº¼?","text":"å‰è¨€èº«ç‚ºä¸€å€‹æƒ³è¦æ‡‰å¾µ SRE(Site Reliability Engineering) å·¥ç¨‹å¸«çš„æˆ‘ï¼Œæœ€è¿‘è¢«æœ‹å‹å•åˆ°èªª SRE çš„å·¥ä½œå…§å®¹è¦åšä»€éº¼ï¼Œå±…ç„¶æ²’è¾¦æ³•è§£é‡‹å¾—å¾ˆæ¸…æ¥šï¼Œä¹Ÿä»£è¡¨æˆ‘å°æ–¼é€™å€‹åè©é‚„ä¸å¤ ç†Ÿæ‚‰å§â€¦å› ç‚º SRE ä¹Ÿä¸æ˜¯ä»€éº¼å¤šæ–°çš„è©äº†ï¼Œç¶²è·¯ä¸Šä¸å°‘è³‡æºå¯ä»¥ç¿»é–±ï¼Œä¸éä¹‹å‰å¸¸å¸¸çœ‹éä¹‹å¾Œè¦ºå¾—è‡ªå·±æœƒäº†ï¼Œç„¶å¾Œè¢«å•åˆè¬›ä¸æ¸…æ¥šï¼Œæ‰€ä»¥å°±æƒ³èªªä¸å¦‚è‡ªå·±æ•´ç†ä¸€ç¯‡æ–‡ç« å§ï¼Œé€™æ¨£è‡³å°‘å¿˜è¨˜çš„æ™‚å€™å¯ä»¥å¿«é€Ÿè¤‡ç¿’ä¸€ä¸‹~SRE æ˜¯ç”± Google æ‰€æå‡ºçš„ä¸€å€‹æ‡‰ç”¨èˆ‡å¯¦ç¾ï¼Œå…¶ä¸­æœƒä½¿ç”¨ SLOï¼ŒSLAï¼ŒSLI ä¸‰é …ä¾†è©•ä¼°æœå‹™çš„ å¯é æ€§ã€‚ æœå‹™æ°´æº–æŒ‡æ¨™ (Service-Level Indicator, SLI) é¡§åæ€ç¾©ï¼ŒSLI æ˜¯ç”¨ä¾†å®šç¾©æœå‹™æ°´æº–çš„ï¼Œä¹Ÿå°±æ˜¯èªªæœå‹™çš„å“è³ªæ˜¯å¥½æˆ–å£å°±æœƒä½¿ç”¨é€™é‚Šçš„å®šç¾©ä¾†æ±ºå®šã€‚ SLI ç¯„ä¾‹ï¼š å¦‚ 300ms çš„è«‹æ±‚å»¶é²ã€‚æˆ–æ˜¯ HTTP ç‹€æ…‹ç¢¼ç‚º 200 çš„å›æ‡‰æ¬¡æ•¸ï¼Œä½”ç¸½å›æ‡‰æ¬¡æ•¸çš„æ¯”ç‡ã€‚ è«‹æ±‚å»¶é²ï¼Œç³»çµ±ååé‡ï¼Œè«‹æ±‚å¤±æ•—å æ¯”ç­‰ï¼Œéƒ½æ˜¯å¯ä»¥è¢«æ‹¿ä¾†æ¸¬é‡ SLI çš„æŒ‡æ¨™ã€‚æœ‰äº†æŒ‡æ¨™ï¼Œå°±å¯ä»¥ä¾†å®šç¾©ç³»çµ±æ˜¯å¦æœ‰åˆ°é”ä¸€å®šçš„æœå‹™æ°´æº–ã€‚ æœå‹™æ°´æº–ç›®æ¨™ (Service-Level Objective, SLO)æ¸¬é‡äº† SLI ä¹‹å¾Œï¼Œå°±å¯ä»¥å®šç¾©ä¸€å€‹æ›´æ˜ç¢ºçš„ç›®æ¨™ä¾†è©•ä¼°æœå‹™çš„å“è³ªæ˜¯å¦æœ‰é”åˆ°è¦æ±‚ã€‚SLO æ˜¯ç”±ä»¥ä¸‹ä¸‰ç¨®å…ƒç´ çµ„æˆï¼š**SLIã€ä¸€æ®µæ™‚é–“å€é–“ã€ç›®æ¨™ (é€šå¸¸ä»¥ç™¾åˆ†æ¯”å‘ˆç¾)**ã€‚ SLO ç¯„ä¾‹ï¼šåœ¨ä¸€å€‹æœˆä¹‹ä¸­ï¼Œ99.9% çš„è«‹æ±‚å»¶é²æœ‰åœ¨ 300ms å…§ã€‚ ä¹Ÿå°±æ˜¯èªªæ˜¯ SLI çš„æŒ‡æ¨™åŠ ä¸Šäº†æ™‚é–“èˆ‡ç›®æ¨™ï¼Œå³ç‚º SLOã€‚å¦å¤–è¦æ³¨æ„åˆ°ï¼Œå¯¦å‹™ä¸Šä¸å¤ªå¯èƒ½è¿½æ±‚ 100% çš„å¯ç”¨ï¼ŒåŸå› æ˜¯æˆæœ¬å¤ªé«˜ä¸¦ä¸”æ²’æœ‰å¿…è¦ã€‚éé«˜çš„å¯é æ€§æœƒæ‹‰é•·é–‹ç™¼æ™‚ç¨‹å°è‡´æ›´æ–°å›°é›£ï¼Œå¯èƒ½å°±æœ‰ä¸€äº›æ–°åŠŸèƒ½ä¸å¥½ä¸Šç·š (é•å SRE å¿«é€Ÿäº¤ä»˜çš„åŸå‰‡)ã€‚ æœå‹™æ°´æº–å”è­° (Service-Level Agreement, SLA)SLA èˆ‡ SLO å¾ˆæ¥è¿‘ï¼Œä½† SLA æ›´åƒæ˜¯çµ¦å®¢æˆ¶çš„æ‰¿è«¾ï¼Œå…¶ä¸­æœƒæ‰¿è«¾å…¶ SLO æ‡‰åœ¨ä¸€æ®µæ™‚é–“å…§é”åˆ°ç‰¹å®šæ°´æº–ï¼Œè‹¥æœªé”åˆ°ä¿è­‰çš„ç›®æ¨™å‰‡æœƒç”¢ç”Ÿç½°å‰‡ã€‚é€šå¸¸åœ¨ SLA ä¸­å®šç¾©çš„ SLO æœƒæ¯”å…§éƒ¨çš„ SLO å†å¯¬é¬†ä¸€é»ï¼š SLA ç¯„ä¾‹ï¼šçµ¦å®¢æˆ¶æ‰¿è«¾ä¸€å€‹æœˆå…§çš„å¯ç”¨æ€§ SLO(SLA) ç‚º 99.9%ï¼Œè€Œå…§éƒ¨ SLO ç‚º 99.95% (è¼ƒåš´è¬¹) SRE (DevOps) å®šç¾©åœ¨æè¿°å®Œä¸‰é …æŒ‡æ¨™ä¹‹å¾Œï¼Œå†ä¾†å®šç¾©ä¸€ä¸‹æ‰€è¬‚ SRE å·¥ç¨‹å¸« åˆ°åº•è¦è² è²¬äº›ä»€éº¼ã€‚è€Œå¾ˆå¸¸èˆ‡ SRE ç¶åœ¨ä¸€èµ·çš„ DevOps ç¶²è·¯ä¸Šçš„å®šç¾©å¾ˆå¤šï¼Œæ•´ç†å¦‚ä¸‹ï¼š DevOps æŒ‡çš„æ˜¯ä¸€ç¨®æ–‡åŒ–ï¼Œæ‰“ç ´ Dev èˆ‡ Ops æºé€šä¸Šçš„å•é¡ŒSRE ç‚º DevOps çš„å¯¦è¸ é‚£éº¼åœ¨ DevOps æ–‡åŒ–ä¸Šï¼Œæœ‰5å€‹åŸºæœ¬çš„å¤§æ–¹å‘åŸå‰‡ï¼š Accept failure as normal (æ¥å—å¤±æ•—æ˜¯å¸¸æ…‹)ï¼šå®šç¾© SLO æ™‚ä¸å¯èƒ½æœƒæœ‰ 100% å¥½çš„æœå‹™ï¼Œå†æª¢è¨éç¨‹ä¸­è¦é¡§åŠï¼šäººã€æ–‡åŒ–ã€å¿ƒç†ä¸Šçš„å®‰å…¨æ„Ÿï¼Œä»¥åŠä¸è²¬ç½µçš„æ–‡åŒ–ã€‚ Reduce organisational silos (é™ä½çµ„ç¹”éš”é–¡)ï¼šSRE çš„å¯¦è¸å°±æ˜¯åœ¨ç¶­é‹èˆ‡ product team å…±åŒåˆ†æ“”ã€‚ Implement gradual change (æ¼¸é€²å¼æ›´å‹•)ï¼šå¦‚é‡‘çµ²é›€é€²é€€ç‰ˆï¼Œå°å…¥ CI/CD ç­‰ï¼Œé™ä½éŒ¯èª¤çš„ costã€‚ Leverage tooling and automation (åˆ©ç”¨å·¥å…·èˆ‡è‡ªå‹•åŒ–)ï¼šæŠŠé‡è¤‡åšçš„äº‹æƒ…è‡ªå‹•åŒ–ã€‚ Measure everythingï¼šèƒ½å¤ ç›£æ§æœå‹™ä¸Šçš„æŒ‡æ¨™ç­‰ç­‰ï¼Œä¸¦ä¸”å®šç¾© SLA çš„æ•¸å€¼ã€‚ SRE å¯¦ä½œäº† DevOps çš„ç²¾ç¥ï¼Œå¸Œæœ›å¯ä»¥é™ä½ Dev èˆ‡ Ops å…©å€‹éƒ¨é–€çš„è¡çªï¼š Devï¼šæƒ³è¦æœ€æ–°æœ€é…·çš„æŠ€è¡“ï¼Œæœ‰æ–°æ±è¥¿å°±æƒ³è¦è¶•å¿«ä¸Šç·šçœ‹çœ‹ã€‚ Opsï¼šæ©Ÿæˆ¿èƒ½ä¸å‹•æœ€ç©©å®šï¼Œé€£é‡é–‹æ©Ÿéƒ½ä¸å¤ªæƒ³ï¼Œæƒ³é”åˆ° 100% çš„å¯ç”¨æ€§ã€‚ æ‰€ä»¥é€™å…©å€‹éƒ¨é–€çš„è¡çªè¦ç”± SRE å·¥ç¨‹å¸«ä¾†è§£æ±ºï¼š è‡ªå‹•åŒ–ï¼šé€éè‡ªå‹•åŒ–ä¾†æé«˜æ•ˆç‡ï¼Œä¸¦è€ƒæ…®å°å…¥ CI/CD ç­‰æµç¨‹å»ºç½®è‡ªå‹•åŒ–æµç¨‹ã€‚ ç¶“å¸¸æª¢è¨ï¼šç‚ºæé«˜å¯ç”¨æ€§å»åˆ†æåŠæª¢è¨æ ¹æœ¬çš„å•é¡Œã€‚ äº‹å‰æ¼”ç·´ ï¼šäº‹æ•…ç™¼ç”Ÿæ™‚é€éäº‹å…ˆæ¼”ç·´ï¼Œé”åˆ°é é˜²å‹æ–¼æ²»ç™‚çš„æˆæ•ˆã€‚ SRE çš„ä»»å‹™å…ˆçœ‹ä¸€æ®µ Red Hat å®˜ç¶²å° SRE çš„æè¿°ï¼š SRE teams are responsible for how code is deployed, configured, and monitored, as well as the availability, latency, change management, emergency response, and capacity management of services in production.(å¦‚ä½•éƒ¨å±¬ã€è¨­å®šã€ç›£æ§ Codeï¼ŒåŒæ™‚å…¼é¡§å¯ç”¨æ€§ï¼Œå»¶é²ï¼Œç·Šæ€¥å›æ‡‰ï¼Œç©ºé–“ç®¡ç†ç­‰) ç°¡å–®ä¾†èªªï¼ŒSRE çš„ä»»å‹™åŒ…å«äº†ï¼š Availability (å¯ç”¨æ€§) Latency (å»¶é²) Performance (æ•ˆèƒ½) Efficiency (æ•ˆç‡) Change management (è®Šæ›´ç®¡ç†) Monitoring (ç›£æ§) Incident response (äº‹æ•…æ‡‰è®Š) Capacity planning (å®¹é‡è¦åŠƒ) ç¸½çµå› ç‚ºæœ€å…ˆæå‡º SRE çš„ç‚º Google çš„å·¥ç¨‹å¸«ï¼Œæ‰€ä»¥ä¸€é–‹å§‹æåˆ°çš„ä¸‰é …æœå‹™æ°´æº– (SLI, SLO, SLA) å¾ˆé‡è¦ï¼Œå¯ä»¥ä½œç‚ºæ˜¯åŸºæœ¬è©•ä¼°æœå‹™çš„æ¨™æº–ã€‚å†ä¾†ææ¸…æ¥š SRE å·¥ç¨‹å¸«å¯¦éš›ä¸Šåœ¨å…¬å¸çš„å®šä½ï¼Œé›–ç„¶èªªå¥½åƒæœƒä¾ç…§æ¯å®¶å…¬å¸çš„å®šç¾©è€Œæœƒæœ‰å·®ç•°ï¼Œä½†æˆ‘å…ˆæ‰¾åˆ°æˆ‘è‡ªå·±çš„å®šç¾©ç„¶å¾Œä¾†å¯¦è¸ç·´ç¿’ï¼Œä¹Ÿæ¯”è¼ƒèƒ½èªªå‡ºä¸€é»æ±è¥¿ã€‚æœ€å¾Œåœ¨ SRE çš„è§€é»ä¸­ï¼Œæœ‰æ‡‰ç”¨äº† ä¸è²¬ç½µåŸå‰‡ï¼Œç•¶éŒ¯èª¤ç”¢ç”Ÿæ™‚ä¸å»è²¬ç½µä»»ä½•ä¸€å€‹äººï¼Œè€Œæ˜¯é‡å°éŒ¯èª¤é€²è¡Œç´€éŒ„ï¼Œä¸¦ä¸”æ–‡ä»¶åŒ–ï¼Œè®“ä¸‹æ¬¡é‡åˆ°é¡ä¼¼ç‹€æ³æ™‚èƒ½æœ‰å€‹ä¾æ“šä¸¦ä¸”å¿«é€Ÿè™•ç†ã€‚ä»¥ Team çš„æ–¹å¼å»çœ‹å¾…æ¯ä¸€æ¬¡å¤±æ•—ï¼Œå¤±æ•—æ²’ä»€éº¼ï¼Œå¦‚ä½•ä¿®æ­£èˆ‡é é˜²æ‰æ˜¯é—œéµã€‚ ä»¥ä¸Šå°±æ˜¯ä¸€å€‹æ–°æ‰‹å°ç™½å°æ–¼ SRE çš„ç†è§£ï¼Œå¦‚æœå…§å®¹æœ‰ç–‘æ…®æ­¡è¿èˆ‡æˆ‘è¨è«– (æ‰¹è©•) ã€‚ åƒè€ƒè³‡æ–™SRE å¿…ä¿®èª²ï¼šä¸€æ¬¡ææ‡‚ SLIã€SLOã€SLA å·®ç•°ï¼ŒGoogle DevOps ç†å¿µå¯¦è¸ - iKala CloudSRE æ˜¯ä»€éº¼ï¼Ÿ ç¶­é‹ç®¡ç†èˆ‡ SRE çš„é—œä¿‚ - Cloud Ace æŠ€è¡“éƒ¨è½æ ¼ (cloud-ace.tw)What is SRE? (redhat.com)(YouTube) What is DevOps? REALLY understand it | DevOps vs SRE","link":"/2022/08/12/SRE-%E5%A6%82%E4%BD%95%E5%AE%9A%E7%BE%A9%EF%BC%8CSLO%EF%BC%8CSLA%EF%BC%8CSLI-%E6%98%AF%E4%BB%80%E9%BA%BC/"},{"title":"åˆå§‹æ•™å­¸é é¢ä¿ç•™ä¸€ä¸‹","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","link":"/2021/09/02/hello-world/"},{"title":"nginx images çš„ docker-entrypoint.sh é–±è®€","text":"å‰è¨€å› ç‚ºç¾åœ¨ Cloud-native çš„è§€å¿µè¶Šä¾†è¶Šç››è¡Œï¼Œcontainer image æ˜¯åŸºç¤å¦‚æœè¦è‡ªå·±å¯« image çš„è©±ï¼Œå°±æœ‰ä¸€äº›çœ‰è§’éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œå…¶ä¸­ä¸€å€‹æˆ‘è¦ºå¾—è »é‡è¦çš„å°±æ˜¯ entrypoint çš„è¨­è¨ˆ (å¦‚æœè¨­è¨ˆä¸å¥½å¯èƒ½ container éš¨æ™‚å°±æ›äº†) ä¹‹å‰ä¹Ÿæœ‰ç”¨é mysql çš„ image, ä»–æä¾›äº†ä¸€å€‹ docker-entrypoint.d ä¾†è®“ä½¿ç”¨è€…æ”¾å…¥ .sh,.sql æª”æ¡ˆï¼Œé€™æ¨£åœ¨å•Ÿå‹•çš„æ™‚å€™å°±å¯ä»¥é å…ˆè¼‰å…¥ä½¿ç”¨è€…å¯«å¥½çš„è³‡æ–™è¡¨ï¼Œä¹‹å¾Œæœ‰æ©Ÿæœƒå†ä¾†æ·±å…¥æ¢ç©¶é‚£é€™æ¬¡ä½¿ç”¨çš„ image ç‚º dockerhub.io/nginx:1.20å…ˆä½¿ç”¨ docker inspect nginx:1.20 ä¾†è§€å¯Ÿä¸€ä¸‹ä»–çš„ entrypoint, cmd åˆ†åˆ¥æ˜¯æ€éº¼è¨­è¨ˆçš„ /entrypoint.sh è§€å¯Ÿ å¯çœ‹åˆ° entrypoint ç‚º /docker-entrypoint.sh é€™éš»ç¨‹å¼cmd å‰‡ç‚º nginx -g daemon offæ¥ä¸‹ä¾†å°±å¯ä»¥ç›´æ¥çœ‹ /docker-entrypoint.sh æ˜¯å¦‚ä½•è¨­è¨ˆçš„ /docker-entrypoint.sh å®Œæ•´æª”æ¡ˆ 1234567891011121314151617181920212223242526272829303132#!/bin/sh# vim:sw=4:ts=4:etset -eif [ -z &quot;${NGINX_ENTRYPOINT_QUIET_LOGS:-}&quot; ]; then exec 3&gt;&amp;1else exec 3&gt;/dev/nullfiif [ &quot;$1&quot; = &quot;nginx&quot; -o &quot;$1&quot; = &quot;nginx-debug&quot; ]; then if /usr/bin/find &quot;/docker-entrypoint.d/&quot; -mindepth 1 -maxdepth 1 -type f -print -quit 2&gt;/dev/null | read v; then echo &gt;&amp;3 &quot;$0: /docker-entrypoint.d/ is not empty, will attempt to perform configuration&quot; echo &gt;&amp;3 &quot;$0: Looking for shell scripts in /docker-entrypoint.d/&quot; find &quot;/docker-entrypoint.d/&quot; -follow -type f -print | sort -V | while read -r f; do case &quot;$f&quot; in *.sh) if [ -x &quot;$f&quot; ]; then echo &gt;&amp;3 &quot;$0: Launching $f&quot;; &quot;$f&quot; else # warn on shell scripts without exec bit echo &gt;&amp;3 &quot;$0: Ignoring $f, not executable&quot;; fi ;; *) echo &gt;&amp;3 &quot;$0: Ignoring $f&quot;;; esac done echo &gt;&amp;3 &quot;$0: Configuration complete; ready for start up&quot; else echo &gt;&amp;3 &quot;$0: No files found in /docker-entrypoint.d/, skipping configuration&quot; fifiexec &quot;$@&quot; æ¥ä¸‹æœƒä»¥å…©å€‹å€æ®µä¾†çœ‹ï¼Œåˆ†åˆ¥æ˜¯ï¼š åŸºæœ¬è¨­å®šå€æ®µ docker-entrypoint.d ç›®éŒ„æª¢æŸ¥å€æ®µ 1.åŸºæœ¬è¨­å®šå€æ®µ1234567891011121314#!/bin/sh# vim:sw=4:ts=4:et# set -e é‡åˆ°éŒ¯èª¤ç›´æ¥çµæŸç¨‹å¼set -e# æª¢æŸ¥è®Šæ•¸if [ -z &quot;${NGINX_ENTRYPOINT_QUIET_LOGS:-}&quot; ]; then exec 3&gt;&amp;1else exec 3&gt;/dev/nullfi# é€™é‚Šå…ˆé€™æ¨£ï¼Œä¸»è¦æ˜¯æ­é…æœ€å¾Œçš„ exec if [ &quot;$1&quot; = &quot;nginx&quot; -o &quot;$1&quot; = &quot;nginx-debug&quot; ]; then...exec &quot;$@&quot; å…ˆæŠŠé–‹é ­è·Ÿçµå°¾åˆ†é–‹ä¾†ç¬¬äºŒè¡Œçš„ vim:sw=4;ts=4;et æ˜¯è·Ÿ vim ç·¨è¼¯å™¨ç¸®æ’çš„æœ‰é—œset -e å‰‡æ˜¯ç•¶ç¨‹å¼å…§æœ‰å›å‚³é 0 æ™‚ (è¡¨ç¤ºåŸ·è¡Œå¤±æ•—) å°±ç«‹åˆ»çµæŸæ¥ä¸‹ä¾†çš„ if [ -z &quot;${NGINX_ENTRYPOINT_QUIET_LOGS:-}&quot; ] å‰‡æ˜¯æª¢æŸ¥é€™å€‹ç’°å¢ƒè®Šæ•¸æ˜¯å¦æœ‰å­˜åœ¨ï¼Œæœ‰çš„è©±å‰‡æœƒæŠŠ Log é€éç®¡ç·šä¸Ÿå‡ºä¾†ï¼Œå¦å‰‡å°±ä¸Ÿåˆ° /dev/nullæœ€å¾Œé€é $1 ä¾†æª¢æŸ¥ cmd æ˜¯å¸¶ä»€éº¼ï¼Œå¦‚æœæ˜¯ nginx, nginx-debug å…¶ä¸­å…©å€‹å°±æœƒé–‹å§‹åŸ·è¡Œè£¡é¢ä¸»è¦çš„é‚è¼¯åˆ¤æ–·åœ¨åŸ·è¡Œ docker run æ™‚å¦‚æœæ²’å¸¶å…¥ä»»ä½•åƒæ•¸ï¼Œå‰‡é è¨­ç‚º nginx -g daemonoff å°±ç¬¦åˆ nginx çš„æƒ…æ³æœ€å¾Œæ”¾é€² exec &quot;$@&quot; ä»£è¡¨ä»»ä½•å¸¶å…¥çš„ cmd éƒ½æœƒåŸ·è¡Œèˆ‰å€‹ä¾‹å­ï¼Œå‡è¨­æˆ‘ä½¿ç”¨ docker run -it nginx:1.20 cat /docker-entrypoint.sh ä¾†é–‹å•Ÿ containeræ ¹æ“š entrypoint çš„è¨­å®šï¼Œé‚„æ˜¯æœƒåŸ·è¡Œ docker-entrypoint.sh, è€Œé€™é‚Šçš„ $1 å°±è®Šæˆäº† cat, if å°±ä¸æœƒæˆç«‹å°±æœƒåŸ·è¡Œæœ€å¾Œçš„ exec &quot;$@&quot;, æ‰€ä»¥åŸ·è¡Œå®Œ cat æŒ‡ä»¤å¾Œ container å°±æœƒé—œæ‰äº†é€™å€‹æ‡‰è©²å°±æ˜¯å¢åŠ  image å½ˆæ€§çš„é—œéµï¼Œä¸è¦è®“ä½¿ç”¨è€…äº‚è¼¸å…¥ cmd ä¹‹å¾Œï¼Œimage æ•´å€‹å£æ‰ docker-entrypoint.d ç›®éŒ„æª¢æŸ¥å€æ®µå»¶çºŒä¸Šé¢æœ€å¾Œçš„ if [ &quot;$1&quot; = &quot;nginx&quot; -o &quot;$1&quot; = &quot;nginx-debug&quot; ]; then 1234567891011121314151617181920212223242526...if [ &quot;$1&quot; = &quot;nginx&quot; -o &quot;$1&quot; = &quot;nginx-debug&quot; ]; then# æª¢æŸ¥æ˜¯å¦æœ‰ 'è‡³å°‘ä¸€å€‹' æª”æ¡ˆ if /usr/bin/find &quot;/docker-entrypoint.d/&quot; -mindepth 1 -maxdepth 1 -type f -print -quit 2&gt;/dev/null | read v; then echo &gt;&amp;3 &quot;$0: /docker-entrypoint.d/ is not empty, will attempt to perform configuration&quot; echo &gt;&amp;3 &quot;$0: Looking for shell scripts in /docker-entrypoint.d/&quot; find &quot;/docker-entrypoint.d/&quot; -follow -type f -print | sort -V | while read -r f; do case &quot;$f&quot; in *.sh) if [ -x &quot;$f&quot; ]; then echo &gt;&amp;3 &quot;$0: Launching $f&quot;; &quot;$f&quot; else # warn on shell scripts without exec bit echo &gt;&amp;3 &quot;$0: Ignoring $f, not executable&quot;; fi ;; *) echo &gt;&amp;3 &quot;$0: Ignoring $f&quot;;; esac done echo &gt;&amp;3 &quot;$0: Configuration complete; ready for start up&quot; else echo &gt;&amp;3 &quot;$0: No files found in /docker-entrypoint.d/, skipping configuration&quot; fifi ç•¶ç¢ºå®šå¥½ $1 = nginx å¾Œï¼Œæœƒå†ä½¿ç”¨ find æŒ‡ä»¤ä¾†æª¢æŸ¥ /docker-entrypoint.d/ ç›®éŒ„ï¼Œä¸¦ä¸”å¸¶å…¥ -mindepth 1 -maxdepth 1 ç¢ºä¿åªæœƒæ‰¾åˆ° /docker-entrypoint.d/ ç›®éŒ„å…§çš„æª”æ¡ˆ (å¦‚ /docker-entrypoint.d/a/a.sh å°±ä¸æœƒè¢«æ‰¾åˆ°)ä½†ç¬¬ä¸€å€‹ if çš„ find é‚„å¸¶å…¥äº† -quit, ç”¨æ„åªæ˜¯ç¢ºä¿ /docker-entrypoint.d/ ç›®éŒ„æœ‰ è‡³å°‘ä¸€å€‹ .sh æª”æ¡ˆéœ€è¦åŸ·è¡Œæ¥ä¸‹ä¾†ç¢ºå®šæœ‰æª”æ¡ˆå¾Œå°±åŸ·è¡Œ find &quot;/docker-entrypoint.d/&quot; -follow -type f -print | sort -V | while read -r f; é–‹å§‹æŠŠæ‰€æœ‰çš„æª”æ¡ˆæŠ“å‡ºä¾†åŸ·è¡Œè£¡é ­ä½¿ç”¨äº† case ä¾†æŠŠ .sh çš„æª”æ¡ˆèˆ‡å…¶ä»–çš„æª”æ¡ˆå€éš”é–‹ä¾†ï¼ŒåªåŸ·è¡Œ *.sh ä¸¦ä¸”æ“æœ‰åŸ·è¡Œæ¬Šé™çš„æª”æ¡ˆ ( ä½¿ç”¨ [ -x &quot;$f&quot; ] æª¢æŸ¥)while read çµæŸå¾Œå°å‡º Configuration complete; ready for start up å‘ŠçŸ¥ä½¿ç”¨è€…é€™å€‹æª”æ¡ˆçš„å…§å®¹å¤§è‡´ä¸Šå°±æ˜¯é€™æ¨£ å¯¦éš›åŸ·è¡Œçµæœå¾Œé¢æœ‰æ—¥æœŸçš„é‚£å€‹æ˜¯ nginx é–‹å•Ÿçš„è¨Šæ¯ï¼Œå¯ä»¥çœ‹åˆ° docker.entrypoint.sh æœƒæŠŠæ¯ä¸€å€‹åŸ·è¡Œçš„ .sh é¡¯ç¤ºå‡ºä¾†ï¼ŒçœŸæ˜¯è²¼å¿ƒ å¾Œè¨˜åœ¨å¯« dockerfile çš„æ™‚å€™éƒ½æœƒè¦ºå¾— entrypoint çš„è¨­è¨ˆå¾ˆå›°é›£ï¼Œç‚ºäº†è®“è‡ªå·±èƒ½å¯«ä¸€äº›ä¸åªè‡ªå·±èƒ½ä½¿ç”¨çš„ image, åƒè€ƒé€™ç¨®å®˜æ–¹çš„ image æ„Ÿè¦ºæ˜¯æŒºä¸éŒ¯çš„ (ä¸æœƒçš„è©±å…ˆæ¨¡ä»¿åˆ¥äººç¸½æ²’å•é¡Œäº†å§!!)å…¶ä¸­åœ¨çœ‹é€™ä»½ docker-entrypoint.sh æ™‚ï¼Œè¦ºå¾—æœ€å¾Œä¸€è¡Œ exec $@ çœŸæ˜¯ç²¾éš¨ï¼Œé€™æ¨£å°±ä¸æœƒåœ¨ä½¿ç”¨è€…äº‚çµ¦ cmd æ™‚é¡¯ç¤ºä¸è©²æœ‰çš„éŒ¯èª¤äº† (ç•¶ç„¶ä¹Ÿæ˜¯æ­é…äº†ä¸Šé¢çš„ if ä¾†åˆ¤æ–·æ‰è¡Œ)é€™ç¯‡æ–‡ç« å¤§æ¦‚å°±åˆ°é€™é‚Šï¼Œå¦‚æœæœ‰å¤§å¤§ç™¼ç¾æˆ‘å¯«çš„å…§å®¹æœ‰å•é¡Œæ­¡è¿æŒ‡æ­£æˆ‘~~ åƒè€ƒè³‡æ–™find man page stackoverflow: set -e dockerhub nginx é é¢","link":"/2022/04/18/nginx/"},{"title":"çœŸæ­£çš„ home brew æ¸¬è©¦","text":"This template explains our QA process for shipping bug-free software. brew tap homebrew/boneyard æœ‰ä¸€å€‹å¥½ç”¨çš„æŒ‡ä»¤ versions ï¼Œä½†ç¾åœ¨ä¸æ”¯æ´äº† çœ‹åˆ°ä¸€ç¯‡æ–‡èªª ï¼Œä¼¼ä¹æŠŠèˆŠç‰ˆçš„repo éƒ½åˆªæ‰äº† I read all the answers. Itâ€™s 2020 and there is no easy way or official command to do that æ²’æœ‰å¥½çš„ downgrade æ–¹æ³• ğŸ˜¢ ç¬¬åä¸‰ç« ã€Linux å¸³è™Ÿç®¡ç†èˆ‡ ACL æ¬Šé™è¨­å®š","link":"/2021/09/02/%E7%9C%9F%E6%AD%A3%E7%9A%84-home-brew-%E6%B8%AC%E8%A9%A6/"},{"title":"æœ‰é¡è‰²çš„shellï¼šzsh ç°¡æ˜“å®‰è£èˆ‡ä½¿ç”¨å¿ƒå¾—","text":"ç‚ºä½•è¦ä½¿ç”¨ zsh?å…ˆä¸Šçµæœ ä¹‹å‰åœ¨çœ‹ä¸€äº› it é‚¦å¹«å¿™çš„æ–‡ç« çš„æ™‚å€™ï¼Œå°±æœ‰ç™¼ç¾æœ‰ä¸å°‘äººçš„ shell è‰²å½©ç¹½ç´› è€Œä¸”é‡é»æ˜¯ä»–å€‘çš„ GIF åœ–çš„ç¯„ä¾‹è£¡é¢ï¼Œæœ‰æ™‚å€™æŒ‡ä»¤å°±è«åå…¶å¦™çš„æ‰“å®Œäº† (ä¸æ˜¯ä½¿ç”¨ Tab) æ–¼æ˜¯å‘¢ï¼Œå°±æƒ³èªªä¹Ÿä¾†ç·´ç¿’çœ‹çœ‹ï¼Œä½†ä»–å¥½åƒä¹Ÿä¸æ˜¯ä»€éº¼æ–°æ±è¥¿äº† å–®ç´”åšå€‹ç­†è¨˜åˆ†äº«ä¸€ä¸‹ 2022/6/19 æ›´æ–° Ubuntu Desktop 22.04 å®‰è£åŸºæœ¬ä¸Šè·Ÿä¸‹é¢çš„æ­¥é©Ÿå·®ä¸å¤šï¼Œä¸é zsh çš„éƒ¨åˆ†å°±ä¸ç”¨å†æŠ“åŸå§‹ç¢¼ç·¨è­¯äº†ï¼Œå¯ä»¥ç›´æ¥æ¡ç”¨ apt install ä¾†å®‰è£ 1234567891011121314151617181920212223242526272829# ubuntu desktop 22.04 æœ€å°åŒ–å®‰è£sudo apt updatesudo apt install openssh-server git# oh-my-zsh sudo apt install zsh # zsh 5.8.1sh -c &quot;$(wget -O- https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&quot;## p10kgit clone --depth=1 https://github.com/romkatv/powerlevel10k.git ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k# å®‰è£ you-should-usegit clone https://github.com/MichaelAquilina/zsh-you-should-use.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/you-should-use# åœ¨ ~/.zshrc çš„ plugin ä¸­æ–°å¢ you-should-use# zsh-autosuggestionsgit clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions# åœ¨ ~/.zshrc çš„ plugin ä¸­æ–°å¢ zsh-autosuggestions# zsh-completions# æœ‰é»ä¸å¤ªç¢ºå®šæ˜¯ä¸æ˜¯å·²ç¶“é è¨­å¥½äº†ï¼Œæˆ‘æŠŠå®ƒåˆªæ‰ä¹‹å¾Œé‚„æ˜¯æœ‰ completions çš„åŠŸèƒ½# git clone https://github.com/zsh-users/zsh-completions ${ZSH_CUSTOM:=~/.oh-my-zsh/custom}/plugins/zsh-completions# ä¸‹è¼‰æˆ‘è‡ªå·±çš„ config , é€™æ®µå¯è·³é# 2022.6 é‚„æ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨ ~git clone https://github.com/RayLin9981/config.gitcp config/.p10k.zsh .cp config/.zshrc .# å®‰è£ç¨‹å¼ç¢¼ç´€éŒ„1234567891011121314151617181920212223242526272829303132333435363738# centos 7 2021.11 æ¸¬è©¦# ä½¿ç”¨ centos 7.4 æœ€å°ç‰ˆå®‰è£# ç¢ºä¿ zsh ç‰ˆæœ¬é«˜æ–¼ 5.1 ( centos 7 é è¨­çš„ repo çš„åªæœ‰5.0.1çš„æ¨£å­)# å»ºè­° sudo è¨­å®š NOPASSWD æ¯”è¼ƒè¼•é¬†å®‰è£sudo yum update -ysudo yum install -y git make ncurses-devel gcc autoconf man yodl wget# å»ä¸‹è¼‰ zsh-5.7.1 çš„ç‰ˆæœ¬ä¾†ç·¨è­¯git clone -b zsh-5.7.1 https://github.com/zsh-users/zsh.git /tmp/zshcd /tmp/zsh./Util/preconfig./configuresudo make -j 20 installcd ~# å®‰è£ ohmyzshwget https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.shyes | sh install.sh# p10kgit clone --depth=1 https://github.com/romkatv/powerlevel10k.git ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k#åœ¨ ~./zshrc ä¸­åŠ å…¥ ZSH_THEME=&quot;powerlevel10k/powerlevel10k&quot;# æ¥ä¸‹ä¾†é‡æ–°è¼‰å…¥ zsh æœƒé€²å…¥è¨­å®šæ¨¡å¼ï¼Œå¯ä¾æ“šè‡ªå·±çš„å–œå¥½é¸æ“‡ï¼Œå¾Œç”Ÿæˆ ~/.p10kzsh# å®‰è£ you-should-usegit clone https://github.com/MichaelAquilina/zsh-you-should-use.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/you-should-use# åœ¨ ~/.zshrc çš„ plugin ä¸­æ–°å¢ you-should-use# zsh-autosuggestionsgit clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions# åœ¨ ~/.zshrc çš„ plugin ä¸­æ–°å¢ zsh-autosuggestions#zsh-completionsgit clone https://github.com/zsh-users/zsh-completions ${ZSH_CUSTOM:=~/.oh-my-zsh/custom}/plugins/zsh-completions# ä¸‹è¼‰æˆ‘è‡ªå·±çš„ config , é€™æ®µå¯è·³égit clone https://github.com/RayLin9981/config.gitcp config/.p10k.zsh .cp config/.zshrc . å¯ä»¥çœ‹åˆ°æœ‰å®‰è£äº† zsh , ohmyzsh,powerlevel10k, zsh-autosuggestions , zsh-completions ç­‰ç­‰ï¼Œå…¶å¯¦ä¸¦ä¸å¤šï¼Œä½†æˆ‘è¦ºå¾—ç”¨èµ·ä¾†è·Ÿ bash æ¯”èµ·ä¾†é‚„æ˜¯æ–¹ä¾¿å¾ˆå¤š Oh My ZSH!é€™å€‹é–‹æºç¨‹å¼ä¸»è¦æ˜¯ç”¨ä¾†ç®¡ç† zsh çš„ä¸€äº› plugins , ç­‰ç­‰è¦å®‰è£çš„ plugins éƒ½æœƒä¸Ÿåˆ° ~/.oh-my-zsh çš„ç›®éŒ„è£¡é¢ Oh My ZSH ä¼¼ä¹æ˜¯å°è‡´ zsh é–‹å§‹è®Šç´…çš„ä¸€å€‹å› ç´ ä¹‹ä¸€ï¼Œæœ‰çœ‹éä¸€ç¯‡æ–‡æ˜¯èªª Oh My ZSH å‡ºä¾†ä¹‹å¾Œåœ¨ google æœå°‹ä¸Š zsh çš„æœå°‹é »ç‡æå‡å¾ˆå¤š (é›¢é¡Œäº†) ä¸¦ä¸”å¯ä»¥åˆ°ä»–çš„å®˜æ–¹ç¶²ç«™å»æŒ‘é¸ä¸»é¡Œä¾†ç”¨ï¼Œä¸»é¡Œå¤šåˆ°ç”¨æ»¾è¼ªæ»‘ä¹Ÿè¦æ»‘å¾ˆä¹…æ‰æ»‘çš„å®Œ ä½†æˆ‘çš„ä¸»é¡Œæ˜¯ä½¿ç”¨ powerlevel10k powerlevel10kä¸»è¦è®“ç•«é¢è®Šå¾—é®®è±”çš„é“å…·~ åœ¨ç¬¬ä¸€æ¬¡ä¸‹è¼‰æ™‚ï¼Œåˆ° åœ¨ ~./zshrc ä¸­åŠ å…¥ ZSH_THEME=&quot;powerlevel10k/powerlevel10k&quot; å¾Œé€²å…¥ zsh å°±æœƒæœ‰ä¸€å€‹äº’å‹•ä»‹é¢ï¼Œå¯ä»¥ä¾å¾ªä»–çš„æ­¥é©ŸæŒ‘é¸è‡ªå·±å–œæ­¡çš„æ¨¡æ¨£ çµæŸå¾Œè‹¥æƒ³å†é‡æ–°è¨­å®šä¸€æ¬¡ ï¼Œå¯è¼¸å…¥ p10k configure å†é€²å…¥äº’å‹•ä»‹é¢ è‹¥æ˜¯æƒ³è¦æ›´å®¢è£½åŒ–ï¼Œå¯ä»¥å»ç·¨è¼¯ ~/.p10k.zsh é€™å€‹æª”æ¡ˆï¼Œè£¡é¢æœ‰éå¸¸å¤šçš„æ±è¥¿å¯ä»¥ä¿®æ”¹ e.g. POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS é€™å€‹è®Šæ•¸é¡§åæ€ç¾©å°±æ˜¯è¦æ§åˆ¶ç•«é¢å³æ–¹é¡¯ç¤ºçš„æ±è¥¿ï¼Œä»¥æˆ‘çš„ç•«é¢ç‚ºä¾‹ï¼Œæˆ‘æœ‰æ–°å¢äº† ip é€™å€‹åŠŸèƒ½ï¼Œå°±å¯ä»¥çœ‹åˆ°ç›®å‰ä¸»è¦çš„ interface çš„ IP ï¼Œçœå»æˆ‘æ¯æ¬¡åœ¨å¤šå°é›»è…¦åˆ‡ä¾†åˆ‡å»çš„æ™‚å€™éƒ½æœƒå¿˜è¨˜ IP æ˜¯å¤šå°‘ èƒ½å®¢è£½åŒ–çš„æ±è¥¿éå¸¸å¤šï¼Œä¹Ÿå¯ä»¥ç›£æ§ CPU,memory ç­‰ç³»çµ±è³‡æºï¼Œä¹Ÿå¯ä»¥è‡ªå·±å®šç¾©åœ–ç¤º (å°±ä¸ç”¨é¡¯ç¤ºé†œé†œçš„ CPU ä¸‰å€‹å­—)ï¼Œä¸éæˆ‘å°±æ²’æœ‰å¤šåŠ ç ”ç©¶ï¼Œé€™å€‹å¯ä»¥åˆ°ç¶²è·¯ä¸Šæ‰¾åˆ¥äººçš„ç¯„æœ¬ä¾†æ”¹ you-should-useä¸‹è¼‰å®Œä¹‹å¾Œï¼Œåˆ° ~/.zshrc çš„ plugins æ–°å¢ you-should-use (ç”¨ç©ºç™½éš”é–‹ï¼Œæˆ–æ˜¯ä¸€è¡Œä¸€è¡Œçš„ä¹Ÿå¯ä»¥) é‚£é€™å€‹å¥—ä»¶å‘¢ï¼Œä¸»è¦æ˜¯æ­é…ä¸Š Linux çš„ alias åŠŸèƒ½ï¼Œéå¸¸å¯¦ç”¨ å› ç‚ºåœ¨ ~/.zshrc ä¸­çš„ plugins æœ‰æ–°å¢æŒ‡ä»¤çš„è©±ï¼Œä»–å°±æœƒå¹«å¿™ç”¢ç”Ÿå¾ˆå¤šå¥½ç”¨çš„ ailasï¼Œä»¥æˆ‘çš„æª”æ¡ˆä¾†èªªï¼š 1234plugins=(git you-should-use zsh-autosuggestions zsh-completions kubectl ) # è«‹æ³¨æ„ kubectl é€™è¡Œalias | grep kubectl | wc -l94 ä»–è‡ªå‹•å¹«æˆ‘è¨­å®šé€™äº›ï¼Œå°±ç®—å¾ˆå¥½ç”¨ä¹Ÿæ ¹æœ¬è¨˜ä¸ä½ï¼Œä½†æ˜¯ you should use å°±æœƒåœ¨æˆ‘åŸ·è¡Œçš„æ™‚å€™å‘Šè¨´æˆ‘æ‡‰è©²è¦ç”¨æœ‰è¨­å®šçš„ ailas ï¼Œè¢«å¤šæé†’å¹¾æ¬¡ä¹‹å¾Œè¦ä¸è¨˜ä½ä¹Ÿé›£å•¦~ æ‰€ä»¥ä¸Šé¢çš„æŒ‡ä»¤kubectl apply -f ~/test å°±å¯ä»¥ç°¡åŒ–æˆ kaf ~/test è¼•é¬†åˆè‡ªåœ¨ zsh-autosuggestions &amp; zsh-completionzsh-completion é€™å€‹å°±æ˜¯è·Ÿ bash-completion å·®ä¸å¤šçš„åŠŸèƒ½ï¼Œåªè¦æ‹”æ‰ Tab å°±æœƒç«‹åˆ»å–ªå¤±èƒ½åŠ›çš„æˆ‘ï¼Œè·³åˆ° zsh ä¾†ä¹Ÿæ˜¯ç«‹åˆ»å°±å…ˆæŠŠé€™å€‹æº–å‚™å¥½äº† ç°¡å–®èªªä¸€ä¸‹ï¼Œä»–å¯ä»¥è·Ÿ kubectl (ç•¶ç„¶æŒ‡ä»¤å¤§å¤šæ•¸éƒ½å¯ä»¥) äº’å‹•ï¼Œæ¯”å¦‚æˆ‘æ‰“ kubectl get pods -n [Tab] çš„æ™‚å€™ï¼Œä»–å°±æœƒé¡¯ç¤º -n èƒ½è¼¸å…¥ä»€éº¼åƒæ•¸ (ä¹Ÿå°±æ˜¯æˆ‘ç›®å‰ç’°å¢ƒå…§çš„ namespace)ï¼Œä¸è£ä»–çš„è©±çœŸçš„ä¸€å †æŒ‡ä»¤éƒ½è¨˜ä¸ä½äº† XD zsh-autosuggestions ä¹Ÿæ˜¯å¾ˆå¥½ç”¨çš„ä¸€å€‹ plugins , ä»–æœƒä¾æ“šä½ æ›¾ç¶“è¼¸å…¥éçš„æŒ‡ä»¤çµ¦ä½ å»ºè­° (ç”¨æ¯”è¼ƒæ·ºçš„é¡è‰²) ï¼Œå¦‚æœé‚£æ˜¯ä½ è¦çš„å°±ç›´æ¥æŒ‰ æ–¹å‘éµçš„å³éµ ï¼Œä»–å°±æœƒè‡ªå‹•å¹«ä½ è£œå…¨ é è¨­æ˜¯åªæœ‰å»è¿½è¹¤ history ï¼Œä½†æˆ‘è¦ºå¾— completion çš„åŠŸèƒ½ä¹Ÿå¾ˆå¥½ç”¨ï¼Œæ‰€ä»¥å°±æœ‰è£œä¸Šå» å¯ä»¥åˆ° .oh-my-zsh/custom/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh è£¡é¢çš„ ZSH_AUTOSUGGEST_STRATEGY=(history completion ) åšé€™æ¨£çš„èª¿æ•´ ç¸½çµä»¥ç¾åœ¨ä¸€å€‹æœˆå·¦å³å­¸ç¿’ kubernetes ç”¨èµ·ä¾†ï¼Œzsh é‚„è »èˆ’æœçš„ï¼Œå–„ç”¨é€™äº› plugins çš„ç¢ºå¯ä»¥æ¸›çŸ­æ‰“å¾ˆå¤šå­—çš„æ™‚é–“å‘¢~ é€™ç¯‡æ–‡ç« æ¯”æˆ‘æƒ³åƒä¸­çš„é‚„æ™šç”Ÿå‡ºä¾† XDâ€ ï¼Œæ¥ä¸‹ä¾†æœƒç¹¼çºŒåŠ æŠŠå‹çš„~~ åƒè€ƒè³‡æ–™zshå®‰è£ä¸»è¦åƒè€ƒæ–‡ç«  æ”¹è®Šwindows ç·¨ç¢¼ï¼Œä¸ç„¶æœƒçœ‹ä¸åˆ° powerlevel çš„å­—å‹è¨­å®š p10kå®‰è£å­—å‹ç­‰ VMware player é–‹æ©Ÿé †åºèª¿æ•´","link":"/2021/11/15/%E6%9C%89%E9%A1%8F%E8%89%B2%E7%9A%84shell%EF%BC%9Azsh-%E7%B0%A1%E6%98%93%E5%AE%89%E8%A3%9D%E8%88%87%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/"},{"title":"ç¬¬ä¸€ç¯‡ï¼šè‡ªæˆ‘ä»‹ç´¹èˆ‡éƒ¨è½æ ¼æ–¹é‡","text":"å‰è¨€å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ—ç¦¹å¿—ï¼Œé€™æ˜¯é€™ç¶²ç«™çš„ç¬¬ä¸€ç¯‡æ–‡ï¼Œæœƒç°¡å–®çš„æè¿°ä¸€ä¸‹æˆ‘çš„å¿ƒè·¯æ­·ç¨‹èˆ‡å‰µå»ºéƒ¨è½æ ¼çš„è¦åŠƒ é¦–å…ˆæˆ‘å¿…é ˆè¦èªªï¼Œå› ç‚ºæˆ‘é‚„å¾ˆèœæ²’æœ‰ä»€éº¼å¯¦å‹™ç¶“é©—ï¼Œæ‰€ä»¥ä»¥ä¸‹çš„å…§å®¹æœƒä¾ç…§æˆ‘ç›®å‰çš„ç†è§£ä¾†å¯«ï¼Œå¯èƒ½æœƒæœ‰å¾ˆå¤šéŒ¯èª¤çš„éƒ¨åˆ†ï¼Œæ•¬è«‹è¦‹è«’~ ç¬¬ä¸€æ¬¡ä½¿ç”¨é›²ç«¯ (AWS)ç¬¬ä¸€æ¬¡æ¥è§¸åˆ°é›²ç«¯æ˜¯å¤§å­¸æ™‚ç³»ä¸Šæœ‰ä¸€ä½æ•™æˆ (é»ƒæ‡·é™ æ•™æˆï¼Œä¸‹ç¨± Cage ) æ˜¯ AWS çš„åˆä½œå¤¥ä¼´ï¼Œåˆ©ç”¨ AWS educate çš„è³‡æ ¼é–‹äº†å…©é–€é¸ä¿®èª²ï¼Œæˆ‘å°é›²ç«¯å¾ˆæ„Ÿèˆˆè¶£å°±é¸äº† åœ¨é‚£æ™‚é‚„ä¸æ‡‚ç¶²è·¯æ¶æ§‹ç­‰ç­‰çš„æ±è¥¿ï¼Œæ‰€ä»¥ç”¨åˆ°æœ€å¤šçš„å°±æ˜¯ EC2 ç•¶ä½œè™›æ“¬æ©Ÿä½¿ç”¨è€Œå·²ï¼Œå…¶ä»–æœå‹™å°±æ˜¯è½è½ç†è«– (å¦‚ï¼š AWS S3 èƒ½å¤ çµ¦äºˆå¹¾å€‹9çš„å¯ç”¨æ€§ç­‰ç­‰çš„)ï¼Œæœ‰é»æ²’è¾¦æ³•èæœƒè²«é€šã€‚ä¸éæˆ‘èªç‚ºé›²ç«¯æ˜¯æœªä¾†çš„è¶¨å‹¢ï¼Œå¾Œä¾†ä¹Ÿè«‹ Cage ä½œç‚ºæˆ‘å€‘å°ˆé¡Œçš„æŒ‡å°æ•™æˆï¼Œç¹¼çºŒè·Ÿè‘—ä»–å­¸ç¿’ã€‚ ç¬¬ä¸€æ¬¡åƒåŠ ç¤¾ç¾¤æ´»å‹• (2019 COSCUP)èƒ½å¤ æ¥è§¸åˆ°é€™å¡Šï¼Œä¹Ÿæ˜¯ Cage è¦æˆ‘å€‘å»æ‰¾æ‰¾å°ˆé¡Œçš„éˆæ„Ÿã€‚é‚£æ™‚å€™æˆ‘é‚„æ²’æœ‰æ¥è§¸é Linux ï¼Œç”šè‡³é€£ Ubuntu ä¹Ÿæ²’è½éï¼Œæœ‰é»åƒåŠ‰å§¥å§¥é€²å¤§è§€åœ’ï¼Œå¹¾ä¹ä»€éº¼éƒ½çœ‹ä¸æ‡‚è½ä¸æ‡‚ XD å…¶ä¸­æœ‰ä¸€å ´è­°ç¨‹è®“æˆ‘æ¯”è¼ƒå°è±¡æ·±åˆ»ï¼Œä¸»é¡Œå« ï¼šã€Œå¸¶ä½ äº†è§£ grep çš„èƒŒå¾ŒåŸç†ã€ï¼Œæƒ³ç•¶ç„¶ï¼Œæˆ‘é‚£æ™‚ä¹Ÿæ²’ç”¨éé€™å€‹æŒ‡ä»¤ï¼Œæˆ‘å°±çµ¦äº†è‡ªå·±ä¸€å€‹å°å°çš„ç›®æ¨™ ã€Œæˆ‘æ˜å¹´çš„ COSCUPï¼Œè‡³å°‘è¦çŸ¥é“ grep æ˜¯ä»€éº¼!ã€ ç¾åœ¨ä¾†çœ‹ï¼Œç¢ºå¯¦æ˜¯ä¸€å€‹éå¸¸å°çš„ç›®æ¨™ï¼Œä½†é‚£æ™‚å€™æˆ‘é‚„å¾ˆç¿’æ…£è€å¸«æ•™ä»€éº¼æˆ‘å°±å­¸ä»€éº¼ï¼Œé‚„ä¸å¤ªæœƒè‡ªå·±ä¸Šç¶²å­¸ç¿’æ–°çš„æ±è¥¿(é‚„å¾…åœ¨èˆ’é©åœˆ) ç¸½ä¹‹ï¼Œé–‹å•Ÿäº†ä¸€å€‹å¾ˆå¤§çš„é–€ï¼Œè£¡é¢æœ‰è‘—ç„¡æ•¸çš„çŸ¥è­˜ç­‰è‘—æŒ–æ˜ã€‚ å¯¦ç¿’å®‰æ’çš„ç¤¾ç¾¤å¤§å¤§æ¼”è¬›æ”¶ç©«åœ¨ä¸€å¹´çš„å¯¦ç¿’ä¸­ï¼Œç¸½ç®—æ˜¯å­¸ç¿’åˆ°äº†æ¯”è¼ƒå®Œæ•´çš„ Linux æ“ä½œ (Red Hat) ï¼Œä¸éå¯¦ç¿’çš„å…§å®¹æƒ³è¦ä¸‹ä¸€æ®µå†è¬›ï¼Œé€™é‚Šæƒ³å…ˆè¬›ç¤¾ç¾¤å¤§å¤§çš„æ¼”è¬›ã€‚ å…¬å¸é‚€è«‹åˆ°äº† Phil èˆ‡ Rico å…©ä½è¬›å¸«ï¼Œç¾åœ¨ç™¼ç¾éƒ½æ˜¯åœ¨ CNTUG çš„å¤§å¤§å€‘å‘¢~ Rico ä¸»è¦æ˜¯è¬›å¦‚ä½•è²¢ç»é–‹æºå°ˆæ¡ˆ(openstack)ï¼Œä½†å› ç‚ºæˆ‘ç¾åœ¨é‚„æ²’æœ‰é–‹å§‹è²¢ç»ï¼Œæ‰€ä»¥é‚„æ²’æœ‰ä»€éº¼é«”æ‚Ÿ å€’æ˜¯ Phil ä¸»è¦æ˜¯è«‡è«–è‡ªå­¸çš„ä¸€äº›ç¶“é©—ç­‰ç­‰ï¼Œç¾åœ¨æ¯”è¼ƒæœ‰æ„Ÿ Phil åœ¨å‰›é–‹å§‹è¬›çš„æ™‚å€™å°±èªª ï¼š ã€Œæˆ‘è¦è¬›çš„æ±è¥¿å¾ˆå›°é›£ï¼Œè¦åƒæˆ‘ä¸€æ¨£æœ‰ç—…æ‰æœ‰å¯èƒ½å …æŒä¸‹å»ã€ ã€Œæˆ‘ä¸æœŸæœ›æˆ‘è¬›å®Œèƒ½è®“å°ä¸‹æ‰€æœ‰äººéƒ½å‹•èµ·ä¾†ï¼Œç¾åœ¨å°ä¸‹å¤§æ¦‚20å¹¾å€‹äººï¼Œæˆ‘åªè¦èƒ½å•Ÿç™¼ä¸€å€‹äººï¼Œé€™å ´æ¼”è¬›å°±æˆåŠŸäº†ã€ æˆ‘å¤§æ¦‚ä¹Ÿä¸ç®—è¢«å•Ÿç™¼çš„ï¼Œç•¢ç«Ÿä¹Ÿæ˜¯éäº†å¿«ä¸€å¹´å¤šæ‰ç™¼è¦ºåˆ°è‡ªå­¸çš„é‡è¦æ€§ ã€Œå–”é‚„æœ‰ï¼Œæˆ‘é€šå¸¸åªè¨˜å¾—å¥³ç”Ÿï¼Œç”·ç”Ÿçš„è©±ä¸è¦éä¾†è·Ÿæˆ‘è£ç†Ÿã€ æ¼”è¬›å…§å®¹å…¶å¯¦å¤§æ¦‚æ˜¯åˆ†äº«ä¸€ä¸‹ Phil è®€ç ”ç©¶æ‰€çš„ä¸€äº›ç¶“æ­·ç­‰ç­‰ï¼Œé‚„æœ‰å¯ä»¥å»æ”¹ .vimrc ç•¶ä½œè‡ªå­¸çš„ç›®æ¨™å•Šä¹‹é¡çš„ æˆ‘è¨˜æœ€æ·±çš„æ˜¯ï¼ŒQAæ™‚æˆ‘å• Phil ï¼šã€Œæˆ‘æœ€è¿‘åœ¨è‡ªå­¸ D Jango (ç™¼éŸ³éŒ¯)ï¼Œä¸çŸ¥é“æ‚¨èƒ½ä¸èƒ½çµ¦æˆ‘ä¸€äº›å»ºè­°ï¼Ÿã€ ä»–å°±å›æˆ‘ï¼šã€Œä½ ç™¼éŸ³éŒ¯äº†å§ï¼Ÿ django?ã€ ç„¶å¾Œä¹Ÿæ²’å›ç­”æˆ‘çš„å•é¡Œï¼Œå¤§æ¦‚èªªäº†ä¸‰æ¬¡æˆ‘ç™¼éŸ³éŒ¯äº†XD é‚„æœ‰æˆ‘å›ç­”å•é¡Œï¼ŒPhil æœ‰æº–å‚™è²¼ç´™çå‹µï¼Œéå»ä¸€çœ‹éƒ½æ˜¯æ²’çœ‹éçš„æ±æ±ï¼Œå°±é¸äº†ä¸€å€‹å¯æ„›çš„ä¸‰åœ°é¼ (podman) Phil å°±è·Ÿæˆ‘åˆ†äº«ä¸€ä¸‹æœ€è¿‘ä»–æœ‰åœ¨ç ”ç©¶é€™å€‹ pod ç®¡ç†ç¨‹å¼é€™æ¨£ ç•¶æ™‚è½çš„ä¼¼æ‡‚éæ‡‚ï¼Œä¸éç¾åœ¨æ‰çŸ¥é“åŸä¾† podman åŸºæœ¬ç”¨èµ·ä¾†è·Ÿ docker å·®ä¸å¤šå‘¢ (åŸºæœ¬) å¤§æ¦‚æ˜¯é€™æ¨£ å¯¦ç¿’æ™‚ï¼Œè‡ªå­¸openstackçš„ç—›è‹¦ç¶“æ­·æ²’éŒ¯ï¼Œæ˜¯ç—›è‹¦çš„ç¶“æ­·ï¼Œæœ‰é»åƒæ˜¯è¶Šç´šæ‰“æ€ªé€™æ¨£ï¼Œä¸€å¤§å †çœ‹éƒ½çœ‹ä¸æ‡‚çš„åè©ï¼Œå®‰è£æ–‡ä»¶è£¡é¢é æœŸæœ‰çš„åŸºç¤çŸ¥è­˜æˆ‘å¹¾ä¹éƒ½æ²’æœ‰ï¼Œæ‰€ä»¥å°±åªèƒ½çœ‹ä¸€çœ‹ï¼Œç„¶å¾Œç…§è‘—æ–‡ä»¶å…§çš„æŒ‡ä»¤ç…§åšï¼Œå°±è®Šæˆäº†ä»¥ä¸‹çš„å¾ªç’°ï¼š ã€Œæ¬¸ï¼Œå¤±æ•—äº†æ¬¸ï¼Œæ€éº¼æœƒå¤±æ•—å‘¢ã€ (æŠŠéŒ¯èª¤è¨Šæ¯ä¸Ÿ google ï¼Œéš¨ä¾¿äº‚æ”¹åƒæ•¸æˆ–.yamlæª”å†åŸ·è¡Œ) ã€Œæ¬¸ï¼æˆåŠŸäº†æ¬¸ï¼æ€éº¼æœƒæˆåŠŸå‘¢ï¼ï¼Ÿã€ é€™æ¨£çš„æµç¨‹å¤§æ¦‚è·‘äº†10-20æ¬¡å§ï¼Œæäº†åŠå¹´ï¼Œç¸½ç®—æ˜¯æŠŠ Red Hat openstack çš„åŸºæœ¬æ¶æ§‹æ¶èµ·ä¾†äº† ç„¶å¾Œï¼Œå¯¦ç¿’å°±çµæŸäº†ï¼Œç¾åœ¨å›å»çœ‹æˆ‘é‚£æ™‚å€™çš„å®‰è£ç­†è¨˜ï¼Œè£¡é¢å°±å…¨éƒ¨æ˜¯æˆ‘æ”¹äº†å“ªäº›æª”æ¡ˆï¼Œå“ªå€‹åƒæ•¸ç­‰ç­‰ï¼Œéƒ¨ç½²çš„æŒ‡ä»¤å¯èƒ½æ’åˆ—çµ„åˆèµ·ä¾†å°±æœ‰å¹¾ç™¾ç¨® æ›´è¦å‘½çš„æ˜¯ ï¼Œ overcloud åœ¨éƒ¨ç½²çš„æ™‚å€™ï¼ŒæŒ‡ä»¤è·‘ä¸‹å»æœ‰æ™‚å€™å°±è¦åŠå°æ™‚ (å¦‚æœåƒæ•¸éŒ¯åœ¨å¾Œé¢çš„æ­¥é©Ÿ) ä¹Ÿå°±æ˜¯æˆ‘æ¸¬è©¦ä¸Šç™¾å€‹çš„åƒæ•¸ï¼Œæ¯å¤©å°±æ˜¯åœ¨åŸ·è¡ŒæŒ‡ä»¤ï¼Œç„¶å¾Œçœ‹è‘—é»‘ç•«é¢é–‹å§‹æ‹œè¨—ä»–æˆåŠŸã€‚ ç¾åœ¨çœ‹ä¾†æ˜¯ä¸€å€‹å¾ˆç³Ÿç³•çš„è‡ªå­¸å¿ƒæ…‹ï¼Œä¸éé‚£æ™‚å€™æœ‰æ¯å€‹ç¦®æ‹œçš„é€²åº¦å£“åŠ›ï¼Œå†åŠ ä¸Šæ¥å­¸æ ¡åŠ©æ•™æ¯å€‹ç¦®æ‹œéƒ½è¦å‚™èª²ç­‰ç­‰çš„ æœ€å¤§çš„æ”¶ç©«å¤§æ¦‚æ˜¯çŸ¥é“è‡ªå·±æ˜¯æœ‰å¤šå»¢å§(? ï¼Œä¹Ÿç¢ºç«‹äº†å¾Œé¢æ¿€èµ·è‡ªå­¸çš„å¿ƒ æŠŠé‚£æ™‚å€™ä¸æ‡‚çš„åè©è¨˜ä¸€ä¸‹ï¼šL2,L3 ,HAproxy,Puppet,vxlan,gateway(å°ï¼Œå°±æ˜¯é‚£å€‹gateway) , èªè­˜ CNTUG (COSCUP 2021)ä»Šå¹´å› ç‚ºç–«æƒ…çš„é—œä¿‚ï¼ŒCOSCUP æ”¹ç‚ºç·šä¸Šèˆ‰è¾¦ï¼Œæ”¹ä½¿ç”¨ Gather town é€²è¡Œè­°ç¨‹ï¼Œæ¯ä¸€å€‹è­°ç¨‹è»Œä¹Ÿæ”¹æˆè¬›å¸«é å…ˆéŒ„å¥½å½±ç‰‡å¾Œå†æ’­æ”¾ æˆ‘å°±å’Œå‰å…©å¹´åƒèˆ‡çš„æ¨¡å¼ä¸€æ¨£ï¼Œå…ˆè¦åŠƒä¸€ä¸‹æœ‰èˆˆè¶£çš„ä¸»é¡Œï¼Œå†ä¾†çœ‹çœ‹è¦çœ‹ä»€éº¼ï¼Œæ³¨æ„åˆ°äº†å¤§éƒ¨åˆ†æˆ‘æœ‰èˆˆè¶£çš„ä¸»é¡Œéƒ½æ˜¯ CNTUG çš„è­°ç¨‹è»Œ å…¶ä¸­ Gene Guo å¤§å¤§çš„ ã€Œå¾é›¶æ‰“é€ è‡ªå·±çš„ Home Labã€ ä¸»é¡Œå¾ˆå¸å¼•æˆ‘ï¼Œå› ç‚ºæ­£æœ‰æ‰“ç®—ä¾†è‡ªå»ºä¸€å€‹ Home Lab ä¾†ç·´ç¿’ openstack ç”¨ (ä»–çš„ lab ä¹Ÿæ˜¯æœ‰ç”¨ openstack æ¶æ§‹) ä¸éå…§å®¹é‚„æ˜¯æœ‰å¾ˆå¤šè½ä¸æ‡‚çš„éƒ¨åˆ†ï¼Œæˆ‘ä¹Ÿç›¡å¯èƒ½çš„åšæˆç­†è¨˜å›‰ æœ€é‡è¦çš„æ˜¯ï¼Œå—æƒ æ–¼ç·šä¸Šèˆ‰è¾¦ï¼Œæˆ‘ä¹Ÿç¸½ç®—é¼“èµ·å‹‡æ°£åœ¨è™›æ“¬æœƒå ´ä¸Šæ‰¾åˆ°äº† Gene Guo å¤§å¤§èŠèŠã€‚ ä¸»è¦å°±æåˆ°äº†å‰é¢ openstack çš„æ…˜ç—›å­¸ç¿’ç¶“é©—ï¼Œä»–ä¹Ÿçµ¦äº†æˆ‘ä¸€äº›é—œéµå­—(OVS,OVN)ç­‰ï¼Œä¹Ÿå»ºè­°æˆ‘å¯ä»¥ä¸€å€‹ä¸€å€‹å…ƒä»¶ä¾†è£ (RHEL çš„å°±æ˜¯ä¸€æ¬¡å…¨åŒ…) ï¼Œå†ä¾†æ…¢æ…¢äº†è§£ã€‚ æ—¥å¾Œçš„å­¸ç¿’æ–¹é‡èˆ‡éƒ¨è½æ ¼è¦åŠƒä¸Šé¢å°±å¤§æ¦‚è¬›äº†ä¸€ä¸‹æœƒèµ°åˆ°ç¾åœ¨é€™æ­¥(? çš„æƒ…æ³ åœ¨å‰é¢é€™æ®µæ™‚é–“(2021/7-9) ï¼ŒæŠŠ Cisco CCNA è­‰ç…§çš„å…§å®¹è®€äº†ä¸€ä¸‹ï¼Œç¸½ç®—æ˜¯å°ç¶²è·¯æ¶æ§‹æœ‰äº†æ¯”è¼ƒå®Œæ•´çš„äº†è§£ï¼Œä¹ŸæŠŠ Red Hat çš„ RHCSA è­‰ç…§æ‹¿åˆ°æ‰‹äº†ï¼Œæ¥ä¸‹ä¾†æœƒç¹¼çºŒå¾€ docker,k8s,openstack(ovs,ovn) ç­‰ç­‰å­¸ç¿’ï¼Œä¹Ÿå› ç‚ºæˆ‘é‚„å¾ˆå¤šæ±è¥¿ä¸æœƒï¼Œæ‰€ä»¥å¸Œæœ›èƒ½æä¾›çµ¦è·Ÿæˆ‘ä¸€æ¨£çš„äººä¸€äº›å•Ÿç™¼ï¼Œä¸€èµ·å­¸ç¿’é€²æ­¥é€™æ¨£ ç›®å‰å¤§æ¦‚æœƒåƒè€ƒ phil çš„ home lab ï¼Œä¹Ÿä¾†æä¸€å€‹è‡ªå·±çš„æ–‡ç« æˆ–æ˜¯å…ˆå¯«æ”¿åºœèª²çš„å¿ƒå¾—(SRE èª²ç¨‹ï¼Œè¦ä¸Šåˆ°11/30)ï¼Œå…§å®¹æœ‰åŒ…å« k8s èˆ‡ container ç­‰ï¼Œæˆ–è¨±æœ‰ä»€éº¼æ–°çš„é«”æ‚Ÿä¹Ÿå¯ä»¥ä¾†æ›´æ–°æ–‡ç«  å¤§æ¦‚å°±æ˜¯é€™æ¨£ï¼Œä¹ŸæœŸè¨±è‡ªå·±èƒ½å¤ ç¹¼çºŒå …æŒä¸‹å»å›‰ æ„Ÿè¬ä½ å°æˆ‘æœ‰èˆˆè¶£æŠŠé€™ç¯‡è½è½é•·çš„ç¬¬ä¸€ç¯‡æ–‡ç« çœ‹å®Œ~~~ å¾Œè¨˜æœ€è¿‘å’Œä¸€ä½åœ¨ä¼æ¥­ç®¡ä¼ºæœå™¨çš„è¬›å¸«èŠåˆ° openstack ï¼Œçµæœä»–ä¸€è½åˆ°å›æˆ‘ä¸‰å€‹å­—ã€Œçˆ›æ±è¥¿ã€ å¯¦åœ¨æ˜¯ä¸€å€‹å¾ˆä»¤äººæ„å¤–çš„ç­”æ¡ˆXDâ€ ï¼Œä¸éæˆ‘æ‡‰è©²é‚„æ˜¯æœƒç”¨ç”¨çœ‹æ‰èƒ½çŸ¥é“ã€Œçˆ›ã€åœ¨å“ªé‚Šå§","link":"/2021/09/19/%E7%AC%AC%E4%B8%80%E7%AF%87%EF%BC%9A%E8%87%AA%E6%88%91%E4%BB%8B%E7%B4%B9%E8%88%87%E9%83%A8%E8%90%BD%E6%A0%BC%E6%96%B9%E9%87%9D/"}],"tags":[{"name":"ckad","slug":"ckad","link":"/tags/ckad/"},{"name":"cka","slug":"cka","link":"/tags/cka/"},{"name":"monitoring","slug":"monitoring","link":"/tags/monitoring/"},{"name":"prometheus","slug":"prometheus","link":"/tags/prometheus/"},{"name":"alertmanager","slug":"alertmanager","link":"/tags/alertmanager/"},{"name":"Liunx","slug":"Liunx","link":"/tags/Liunx/"},{"name":"Linux Troubleshooting","slug":"Linux-Troubleshooting","link":"/tags/Linux-Troubleshooting/"},{"name":"SRE","slug":"SRE","link":"/tags/SRE/"},{"name":"DevOps","slug":"DevOps","link":"/tags/DevOps/"},{"name":"container","slug":"container","link":"/tags/container/"},{"name":"docker-entrypoint","slug":"docker-entrypoint","link":"/tags/docker-entrypoint/"}],"categories":[]}